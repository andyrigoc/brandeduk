<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#6B21A8">
    <title>Shop - BrandedUK</title>
    <link rel="stylesheet" href="mobile/css/mobile.css?v=20260102X">
    <link rel="stylesheet" href="mobile/css/social-buttons.css?v=20260102X">
    <link rel="stylesheet" href="brandedukv15-child/assets/css/responsive.css?v=20260102X">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* MOBILE SOCIAL ICONS - FORCE SMALL SIZE */
        .social-icons-mobile {
            gap: 3px !important;
            margin-left: 8px !important;
            padding-left: 0 !important;
        }
        .social-icons-mobile .social-icon {
            width: 27px !important;
            height: 27px !important;
            min-width: 27px !important;
            min-height: 27px !important;
            max-width: 27px !important;
            max-height: 27px !important;
            border-radius: 7px !important;
        }
        .social-icons-mobile .social-icon i {
            font-size: 12px !important;
        }
    </style>
    <style>
        /* Category Filter Styles */
        .categories-filter-scroll {
            position: sticky;
            top: 100px;
            background: #fff;
            z-index: 50;
            padding: 12px 0;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .categories-filter-scroll .categories-scroll {
            display: flex;
            gap: 10px;
            padding: 0 16px;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        
        .categories-filter-scroll .categories-scroll::-webkit-scrollbar {
            display: none;
        }
        
        .category-filter-card {
            flex: 0 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            padding: 10px 16px;
            background: #f3f4f6;
            border: 2px solid transparent;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            scroll-snap-align: start;
            min-width: 70px;
        }
        
        .category-filter-card:hover {
            background: #e5e7eb;
            transform: translateY(-2px);
        }
        
        .category-filter-card.active {
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
            border-color: #7c3aed;
            color: #fff;
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(124, 58, 237, 0.3);
        }
        
        .category-filter-card.active .category-icon svg {
            stroke: #fff;
        }
        
        .category-filter-card.active .category-icon img {
            filter: brightness(0) invert(1);
        }
        
        .category-filter-card .category-icon {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .category-filter-card .category-icon img,
        .category-filter-card .category-icon svg {
            width: 24px;
            height: 24px;
            object-fit: contain;
            transition: filter 0.3s ease;
        }
        
        .category-filter-card span {
            font-size: 11px;
            font-weight: 600;
            white-space: nowrap;
        }
        
        /* Products fade animation */
        .products-grid-shop.filtering .product-card-shop {
            opacity: 0;
            transform: translateY(20px);
        }
        
        .product-card-shop {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        .product-card-shop.fade-in {
            animation: fadeInUp 0.4s ease forwards;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Filter Toggles - 20% bigger + custom colors */
        .filter-toggle-row .vat-toggle-mobile {
            transform: scale(1.2);
            transform-origin: right center;
        }
        
        /* New In - Celeste/Azzurro */
        .filter-toggle-row:nth-child(1) .vat-checkbox:checked + .vat-toggle-label {
            background: linear-gradient(90deg, #38bdf8, #0ea5e9);
        }
        
        /* Bradeal - Rosso */
        .filter-toggle-row:nth-child(2) .vat-checkbox:checked + .vat-toggle-label {
            background: linear-gradient(90deg, #ef4444, #dc2626);
        }
        
        /* Offers - Viola */
        .filter-toggle-row:nth-child(3) .vat-checkbox:checked + .vat-toggle-label {
            background: linear-gradient(90deg, #a855f7, #9333ea);
        }
        
        /* In Stock - Grigio */
        .filter-toggle-row:nth-child(4) .vat-checkbox:checked + .vat-toggle-label {
            background: linear-gradient(90deg, #64748b, #475569);
        }
        
        /* Recycled - Verde/Teal */
        .filter-toggle-row:nth-child(5) .vat-checkbox:checked + .vat-toggle-label {
            background: linear-gradient(90deg, #14b8a6, #0d9488);
        }
        
        /* Plus Sizes - Arancione */
        .filter-toggle-row:nth-child(6) .vat-checkbox:checked + .vat-toggle-label {
            background: linear-gradient(90deg, #f97316, #ea580c);
        }
        
        /* Logo spacing for back button - Tablet */
        @media (min-width: 768px) {
            .mobile-logo-center {
                margin-left: 40px;
            }
        }
    </style>
</head>
<body>
    
    <!-- Tablet Top Bar (768px+) -->
    <div class="tablet-top-bar">
        <div class="tablet-top-bar__left">
            <div class="social-icons-container">
                <a href="https://www.facebook.com/profile.php?id=100083540654262" class="social-icon facebook" target="_blank" rel="noopener">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="https://www.instagram.com/brandeduk" class="social-icon instagram" target="_blank" rel="noopener">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://www.linkedin.com/in/anderson-ricotta-92a394321/" class="social-icon linkedin" target="_blank" rel="noopener">
                    <i class="fab fa-linkedin-in"></i>
                </a>
                <a href="https://www.youtube.com/@barudanamericainc3060" class="social-icon youtube" target="_blank" rel="noopener">
                    <i class="fab fa-youtube"></i>
                </a>
                <a href="https://uk.pinterest.com/pin/7459155629343965/" class="social-icon pinterest" target="_blank" rel="noopener">
                    <i class="fab fa-pinterest-p"></i>
                </a>
            </div>
        </div>
        
        <div class="tablet-top-bar__center">
            <a href="mailto:info@brandeduk.com" class="tablet-top-bar__email">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="4" width="20" height="16" rx="2"/>
                    <path d="m2 7 10 7 10-7"/>
                </svg>
                info@brandeduk.com
            </a>
            <a href="tel:02089742722" class="tablet-top-bar__phone">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                </svg>
                0208 974 2722
            </a>
        </div>
        
        <div class="tablet-top-bar__right">
            <div class="vat-toggle-tablet">
                <span class="vat-label vat-label--exc">EXC VAT</span>
                <input type="checkbox" id="vatToggleTablet" class="vat-checkbox" />
                <label for="vatToggleTablet" class="vat-toggle-label">Toggle VAT</label>
                <span class="vat-label vat-label--inc">INC VAT</span>
            </div>
        </div>
    </div>
    
    <!-- Mobile Header -->
    <header class="mobile-header">
        <!-- Top Row: Social + VAT Toggle -->
        <div class="header-top-row">
            <!-- Social Buttons Left -->
            <div class="social-icons-container social-icons-mobile" style="gap: 2px; margin-left: 8px; padding-left: 0; flex-shrink: 0;">
                <a href="https://www.facebook.com/profile.php?id=100083540654262" class="social-icon facebook" target="_blank" rel="noopener" style="width: 20px; height: 20px; border-radius: 5px;">
                    <i class="fab fa-facebook-f" style="font-size: 9px;"></i>
                </a>
                <a href="https://www.instagram.com/brandeduk" class="social-icon instagram" target="_blank" rel="noopener" style="width: 20px; height: 20px; border-radius: 5px;">
                    <i class="fab fa-instagram" style="font-size: 9px;"></i>
                </a>
                <a href="https://www.linkedin.com/in/anderson-ricotta-92a394321/" class="social-icon linkedin" target="_blank" rel="noopener" style="width: 20px; height: 20px; border-radius: 5px;">
                    <i class="fab fa-linkedin-in" style="font-size: 9px;"></i>
                </a>
                <a href="https://www.youtube.com/@barudanamericainc3060" class="social-icon youtube" target="_blank" rel="noopener" style="width: 20px; height: 20px; border-radius: 5px;">
                    <i class="fab fa-youtube" style="font-size: 9px;"></i>
                </a>
                <a href="https://uk.pinterest.com/pin/7459155629343965/" class="social-icon pinterest" target="_blank" rel="noopener" style="width: 20px; height: 20px; border-radius: 5px;">
                    <i class="fab fa-pinterest-p" style="font-size: 9px;"></i>
                </a>
            </div>

            <!-- VAT Toggle Right -->
            <div class="vat-toggle-mobile" id="vatToggleContainer">
                <span class="vat-label vat-label--exc">EX VAT</span>
                <input type="checkbox" id="vatToggleCheckbox" class="vat-checkbox" />
                <label for="vatToggleCheckbox" class="vat-toggle-label">Toggle VAT</label>
                <span class="vat-label vat-label--inc">INC VAT</span>
            </div>
        </div>

        <!-- Bottom Row: Back + Logo + Search -->
        <div class="header-logo-row">
            <button class="back-btn-header" onclick="window.history.back()" aria-label="Go back">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M15 18l-6-6 6-6"/>
                </svg>
            </button>
            <a href="index.html" class="mobile-logo-center">
                <img src="brandedukv15-child/assets/images/ui/bd-logo-3d.png" alt="BD" class="logo-badge-img">
                <span class="logo-text-styled">branded<span class="logo-uk">uk</span></span>
            </a>
            <!-- Search Bar inline -->
            <div class="search-wrapper-expand">
                <input type="text" placeholder="Search 9,000+ products..." id="searchInput" class="search-input-expand">
                <svg class="search-icon-expand" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.35-4.35"></path>
                </svg>
            </div>
        </div>
    </header>

    <!-- Category Title -->
    <div class="shop-title-bar">
        <button class="back-btn" onclick="window.history.back()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
        </button>
        <h1 class="shop-title" id="categoryTitle">All Products</h1>
        <span class="results-count" id="resultsCount">0 items</span>
    </div>

    <!-- Category Filters (Scrollable with Animation) -->
    <div class="categories-filter-scroll">
        <div class="categories-scroll">
            <button class="category-filter-card active" data-category="all">
                <div class="category-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"/>
                        <rect x="14" y="3" width="7" height="7"/>
                        <rect x="3" y="14" width="7" height="7"/>
                        <rect x="14" y="14" width="7" height="7"/>
                    </svg>
                </div>
                <span>All</span>
            </button>
            <button class="category-filter-card" data-category="tshirts">
                <div class="category-icon">
                    <img src="brandedukv15-child/assets/images/ui/icons/categories/icon-shirt-71%201.png" alt="">
                </div>
                <span>T-Shirts</span>
            </button>
            <button class="category-filter-card" data-category="polo">
                <div class="category-icon">
                    <img src="brandedukv15-child/assets/images/ui/icons/categories/Polo.png" alt="">
                </div>
                <span>Polos</span>
            </button>
            <button class="category-filter-card" data-category="hoodies">
                <div class="category-icon">
                    <img src="brandedukv15-child/assets/images/ui/icons/categories/icon-hoodies-71%201.png" alt="">
                </div>
                <span>Hoodies</span>
            </button>
            <button class="category-filter-card" data-category="jackets">
                <div class="category-icon">
                    <img src="brandedukv15-child/assets/images/ui/icons/categories/Jacket.png" alt="">
                </div>
                <span>Jackets</span>
            </button>
            <button class="category-filter-card" data-category="hivis">
                <div class="category-icon">
                    <img src="brandedukv15-child/assets/images/ui/icons/categories/Hi%20Vis.png" alt="">
                </div>
                <span>Hi-Vis</span>
            </button>
            <button class="category-filter-card" data-category="fleeces">
                <div class="category-icon">
                    <img src="brandedukv15-child/assets/images/ui/icons/categories/Fleece.png" alt="">
                </div>
                <span>Fleeces</span>
            </button>
            <button class="category-filter-card" data-category="bags">
                <div class="category-icon">
                    <img src="brandedukv15-child/assets/images/ui/icons/categories/Bags.png" alt="">
                </div>
                <span>Bags</span>
            </button>
            <button class="category-filter-card" data-category="caps">
                <div class="category-icon">
                    <img src="brandedukv15-child/assets/images/ui/icons/categories/Cap.png" alt="">
                </div>
                <span>Caps</span>
            </button>
            <button class="category-filter-card" data-category="aprons">
                <div class="category-icon">
                    <img src="brandedukv15-child/assets/images/ui/icons/categories/Apron.png" alt="">
                </div>
                <span>Aprons</span>
            </button>
        </div>
    </div>

    <!-- Products Grid -->
    <main class="shop-products-container">
        <div class="products-grid-shop" id="productsGrid">
            <!-- Cards will be generated by JavaScript -->
        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="index.html" class="nav-item">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                <polyline points="9 22 9 12 15 12 15 22"/>
            </svg>
            <span class="nav-item-label">Home</span>
        </a>
        <a href="shop.html" class="nav-item active">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="7" height="7"/>
                <rect x="14" y="3" width="7" height="7"/>
                <rect x="3" y="14" width="7" height="7"/>
                <rect x="14" y="14" width="7" height="7"/>
            </svg>
            <span class="nav-item-label">Shop</span>
        </a>
        <button type="button" class="nav-item-center" id="filtersNavBtn" aria-label="Filters">
            <img src="brandedukv15-child/assets/images/ui/filter-icon.gif" alt="Filters" class="filter-icon-gif">
        </button>

        <a href="basket.html" class="nav-item">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="9" cy="21" r="1"/>
                <circle cx="20" cy="21" r="1"/>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
            </svg>
            <span class="nav-badge" id="navBasketBadge" style="display: none;">0</span>
            <span class="nav-item-label">Basket</span>
        </a>

        <a href="#" class="nav-item">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
            </svg>
            <span class="nav-item-label">Account</span>
        </a>
    </nav>

    <!-- FILTERS DROP-UP MENU -->
    <div class="filters-overlay" id="filtersOverlay"></div>
    <div class="filters-dropup" id="filtersDropup">
        <div class="filters-dropup__header">
            <h2 class="filters-dropup__title">Filter By</h2>
            <button class="filters-dropup__clear" id="filtersClearAll">Clear All</button>
            <button class="filters-dropup__close" id="filtersClose" aria-label="Close">×</button>
        </div>
        <div class="filters-dropup__body">
            <!-- TOGGLE FILTERS -->
            <div class="filters-section filters-toggles">
                <div class="filter-toggle-row">
                    <span class="filter-toggle-label filter-label--new-in">New In</span>
                    <div class="vat-toggle-mobile">
                        <input type="checkbox" id="filterNewIn" class="vat-checkbox" data-filter="newIn" />
                        <label for="filterNewIn" class="vat-toggle-label">Toggle New In</label>
                    </div>
                </div>
                <div class="filter-toggle-row">
                    <span class="filter-toggle-label filter-label--bradeal">Bradeal</span>
                    <div class="vat-toggle-mobile">
                        <input type="checkbox" id="filterBradeal" class="vat-checkbox" data-filter="bradeal" checked />
                        <label for="filterBradeal" class="vat-toggle-label">Toggle Bradeal</label>
                    </div>
                </div>
                <div class="filter-toggle-row">
                    <span class="filter-toggle-label filter-label--offers">Offers</span>
                    <div class="vat-toggle-mobile">
                        <input type="checkbox" id="filterOffers" class="vat-checkbox" data-filter="offers" />
                        <label for="filterOffers" class="vat-toggle-label">Toggle Offers</label>
                    </div>
                </div>
                <div class="filter-toggle-row">
                    <span class="filter-toggle-label filter-label--in-stock">In Stock</span>
                    <div class="vat-toggle-mobile">
                        <input type="checkbox" id="filterInStock" class="vat-checkbox" data-filter="inStock" />
                        <label for="filterInStock" class="vat-toggle-label">Toggle In Stock</label>
                    </div>
                </div>
                <div class="filter-toggle-row">
                    <span class="filter-toggle-label filter-label--recycled">Recycled / Organic</span>
                    <div class="vat-toggle-mobile">
                        <input type="checkbox" id="filterRecycled" class="vat-checkbox" data-filter="recycled" />
                        <label for="filterRecycled" class="vat-toggle-label">Toggle Recycled</label>
                    </div>
                </div>
                <div class="filter-toggle-row">
                    <span class="filter-toggle-label filter-label--plus-sizes">Plus Sizes</span>
                    <div class="vat-toggle-mobile">
                        <input type="checkbox" id="filterPlusSizes" class="vat-checkbox" data-filter="plusSizes" />
                        <label for="filterPlusSizes" class="vat-toggle-label">Toggle Plus Sizes</label>
                    </div>
                </div>
            </div>

            <!-- SEARCH WITHIN RESULTS -->
            <div class="filters-section">
                <label class="filter-search-label">Search products</label>
                <input type="text" class="filter-search-input" id="filterSearchInput" placeholder="Search within results...">
            </div>

            <!-- PRICE RANGE -->
            <div class="filters-section">
                <div class="filter-expandable" data-expanded="true">
                    <div class="filter-expandable__header">
                        <span>Price Range</span>
                        <span class="filter-expandable__arrow">⌄</span>
                    </div>
                    <div class="filter-expandable__content">
                        <div class="price-range-display">
                            <span id="priceMinDisplay">£0</span>
                            <span>-</span>
                            <span id="priceMaxDisplay">£100</span>
                        </div>
                        <input type="range" class="filter-price-slider" id="filterPriceRange" min="0" max="100" value="100">
                    </div>
                </div>
            </div>

            <!-- EXPANDABLE FILTERS -->
            <div class="filters-section filters-expandables">
                <!-- Gender -->
                <div class="filter-expandable" data-filter="gender">
                    <div class="filter-expandable__header">
                        <span>Gender</span>
                        <span class="filter-expandable__arrow">›</span>
                    </div>
                    <div class="filter-expandable__content">
                        <label class="filter-checkbox"><input type="checkbox" value="mens"> Men's</label>
                        <label class="filter-checkbox"><input type="checkbox" value="womens"> Women's</label>
                        <label class="filter-checkbox"><input type="checkbox" value="unisex"> Unisex</label>
                    </div>
                </div>

                <!-- Age Group -->
                <div class="filter-expandable" data-filter="ageGroup">
                    <div class="filter-expandable__header">
                        <span>Age Group</span>
                        <span class="filter-expandable__arrow">›</span>
                    </div>
                    <div class="filter-expandable__content">
                        <label class="filter-checkbox"><input type="checkbox" value="adults"> Adults</label>
                        <label class="filter-checkbox"><input type="checkbox" value="kids"> Kids</label>
                        <label class="filter-checkbox"><input type="checkbox" value="toddler"> Toddler</label>
                        <label class="filter-checkbox"><input type="checkbox" value="baby"> Baby</label>
                        <label class="filter-checkbox"><input type="checkbox" value="junior"> Junior</label>
                        <label class="filter-checkbox"><input type="checkbox" value="youth"> Youth</label>
                    </div>
                </div>

                <!-- Sleeve -->
                <div class="filter-expandable" data-filter="sleeve">
                    <div class="filter-expandable__header">
                        <span>Sleeve</span>
                        <span class="filter-expandable__arrow">›</span>
                    </div>
                    <div class="filter-expandable__content">
                        <label class="filter-checkbox"><input type="checkbox" value="short"> Short Sleeve</label>
                        <label class="filter-checkbox"><input type="checkbox" value="long"> Long Sleeve</label>
                        <label class="filter-checkbox"><input type="checkbox" value="34"> 3/4 Sleeve</label>
                        <label class="filter-checkbox"><input type="checkbox" value="sleeveless"> Sleeveless</label>
                        <label class="filter-checkbox"><input type="checkbox" value="cap"> Cap Sleeve</label>
                        <label class="filter-checkbox"><input type="checkbox" value="raglan"> Raglan</label>
                    </div>
                </div>

                <!-- Neckline -->
                <div class="filter-expandable" data-filter="neckline">
                    <div class="filter-expandable__header">
                        <span>Neckline</span>
                        <span class="filter-expandable__arrow">›</span>
                    </div>
                    <div class="filter-expandable__content">
                        <label class="filter-checkbox"><input type="checkbox" value="crew"> Crew Neck</label>
                        <label class="filter-checkbox"><input type="checkbox" value="vneck"> V-Neck</label>
                        <label class="filter-checkbox"><input type="checkbox" value="polo"> Polo Collar</label>
                        <label class="filter-checkbox"><input type="checkbox" value="hooded"> Hooded</label>
                        <label class="filter-checkbox"><input type="checkbox" value="mandarin"> Mandarin</label>
                        <label class="filter-checkbox"><input type="checkbox" value="scoop"> Scoop Neck</label>
                        <label class="filter-checkbox"><input type="checkbox" value="round"> Round Neck</label>
                        <label class="filter-checkbox"><input type="checkbox" value="zip"> Zip Neck</label>
                        <label class="filter-checkbox"><input type="checkbox" value="button"> Button Down</label>
                    </div>
                </div>

                <!-- Accreditations -->
                <div class="filter-expandable" data-filter="accreditations">
                    <div class="filter-expandable__header">
                        <span>Accreditations</span>
                        <span class="filter-expandable__arrow">›</span>
                    </div>
                    <div class="filter-expandable__content">
                        <label class="filter-checkbox"><input type="checkbox" value="en20471"> EN ISO 20471</label>
                        <label class="filter-checkbox"><input type="checkbox" value="ris3279"> RIS-3279-TOM Rail</label>
                        <label class="filter-checkbox"><input type="checkbox" value="oekotex"> OEKO-TEX</label>
                        <label class="filter-checkbox"><input type="checkbox" value="gots"> GOTS Certified</label>
                        <label class="filter-checkbox"><input type="checkbox" value="fairtrade"> Fair Trade</label>
                        <label class="filter-checkbox"><input type="checkbox" value="wrap"> WRAP Certified</label>
                        <label class="filter-checkbox"><input type="checkbox" value="en343"> EN343 Waterproof</label>
                        <label class="filter-checkbox"><input type="checkbox" value="en11612"> EN11612 Flame</label>
                    </div>
                </div>

                <!-- Primary Colour -->
                <div class="filter-expandable" data-filter="primaryColour">
                    <div class="filter-expandable__header">
                        <span>Primary Colour</span>
                        <span class="filter-expandable__arrow">›</span>
                    </div>
                    <div class="filter-expandable__content filter-colors-grid">
                        <label class="filter-color" style="--color: #1a1a1a"><input type="checkbox" value="black"><span>Black</span></label>
                        <label class="filter-color" style="--color: #ffffff"><input type="checkbox" value="white"><span>White</span></label>
                        <label class="filter-color" style="--color: #000080"><input type="checkbox" value="navy"><span>Navy</span></label>
                        <label class="filter-color" style="--color: #808080"><input type="checkbox" value="grey"><span>Grey</span></label>
                        <label class="filter-color" style="--color: #ff0000"><input type="checkbox" value="red"><span>Red</span></label>
                        <label class="filter-color" style="--color: #0000ff"><input type="checkbox" value="blue"><span>Blue</span></label>
                        <label class="filter-color" style="--color: #008000"><input type="checkbox" value="green"><span>Green</span></label>
                        <label class="filter-color" style="--color: #ffff00"><input type="checkbox" value="yellow"><span>Yellow</span></label>
                        <label class="filter-color" style="--color: #ffa500"><input type="checkbox" value="orange"><span>Orange</span></label>
                        <label class="filter-color" style="--color: #800080"><input type="checkbox" value="purple"><span>Purple</span></label>
                        <label class="filter-color" style="--color: #ffc0cb"><input type="checkbox" value="pink"><span>Pink</span></label>
                        <label class="filter-color" style="--color: #8b4513"><input type="checkbox" value="brown"><span>Brown</span></label>
                        <label class="filter-color" style="--color: #800020"><input type="checkbox" value="burgundy"><span>Burgundy</span></label>
                        <label class="filter-color" style="--color: #c3b091"><input type="checkbox" value="khaki"><span>Khaki</span></label>
                        <label class="filter-color filter-color--multi" style="background: linear-gradient(135deg, red, orange, yellow, green, blue, purple)"><input type="checkbox" value="multi"><span>Multi</span></label>
                    </div>
                </div>

                <!-- Colour Shade -->
                <div class="filter-expandable" data-filter="colourShade">
                    <div class="filter-expandable__header">
                        <span>Colour Shade</span>
                        <span class="filter-expandable__arrow">›</span>
                    </div>
                    <div class="filter-expandable__content">
                        <label class="filter-checkbox"><input type="checkbox" value="light"> Light</label>
                        <label class="filter-checkbox"><input type="checkbox" value="dark"> Dark</label>
                        <label class="filter-checkbox"><input type="checkbox" value="bright"> Bright</label>
                        <label class="filter-checkbox"><input type="checkbox" value="pastel"> Pastel</label>
                        <label class="filter-checkbox"><input type="checkbox" value="neon"> Neon</label>
                        <label class="filter-checkbox"><input type="checkbox" value="heather"> Heather</label>
                        <label class="filter-checkbox"><input type="checkbox" value="marl"> Marl</label>
                    </div>
                </div>

                <!-- CMYK -->
                <div class="filter-expandable" data-filter="cmyk">
                    <div class="filter-expandable__header">
                        <span>CMYK</span>
                        <span class="filter-expandable__arrow">›</span>
                    </div>
                    <div class="filter-expandable__content">
                        <input type="text" class="filter-text-input" placeholder="Enter CMYK values...">
                    </div>
                </div>

                <!-- Pantone -->
                <div class="filter-expandable" data-filter="pantone">
                    <div class="filter-expandable__header">
                        <span>Pantone</span>
                        <span class="filter-expandable__arrow">›</span>
                    </div>
                    <div class="filter-expandable__content">
                        <input type="text" class="filter-text-input" placeholder="Enter Pantone code...">
                    </div>
                </div>

                <!-- Style -->
                <div class="filter-expandable" data-filter="style">
                    <div class="filter-expandable__header">
                        <span>Style</span>
                        <span class="filter-expandable__arrow">›</span>
                    </div>
                    <div class="filter-expandable__content">
                        <label class="filter-checkbox"><input type="checkbox" value="classic"> Classic</label>
                        <label class="filter-checkbox"><input type="checkbox" value="modern"> Modern</label>
                        <label class="filter-checkbox"><input type="checkbox" value="slim"> Slim Fit</label>
                        <label class="filter-checkbox"><input type="checkbox" value="regular"> Regular Fit</label>
                        <label class="filter-checkbox"><input type="checkbox" value="relaxed"> Relaxed</label>
                        <label class="filter-checkbox"><input type="checkbox" value="oversized"> Oversized</label>
                        <label class="filter-checkbox"><input type="checkbox" value="athletic"> Athletic</label>
                        <label class="filter-checkbox"><input type="checkbox" value="workwear"> Workwear</label>
                        <label class="filter-checkbox"><input type="checkbox" value="casual"> Casual</label>
                        <label class="filter-checkbox"><input type="checkbox" value="formal"> Formal</label>
                        <label class="filter-checkbox"><input type="checkbox" value="vintage"> Vintage</label>
                        <label class="filter-checkbox"><input type="checkbox" value="streetwear"> Streetwear</label>
                    </div>
                </div>

                <!-- Features -->
                <div class="filter-expandable" data-filter="features">
                    <div class="filter-expandable__header">
                        <span>Features</span>
                        <span class="filter-expandable__arrow">›</span>
                    </div>
                    <div class="filter-expandable__content">
                        <label class="filter-checkbox"><input type="checkbox" value="pockets"> Pockets</label>
                        <label class="filter-checkbox"><input type="checkbox" value="hood"> Hood</label>
                        <label class="filter-checkbox"><input type="checkbox" value="zip"> Zip</label>
                        <label class="filter-checkbox"><input type="checkbox" value="buttons"> Buttons</label>
                        <label class="filter-checkbox"><input type="checkbox" value="drawstring"> Drawstring</label>
                        <label class="filter-checkbox"><input type="checkbox" value="elastic"> Elastic Cuffs</label>
                        <label class="filter-checkbox"><input type="checkbox" value="reflective"> Reflective</label>
                        <label class="filter-checkbox"><input type="checkbox" value="waterproof"> Waterproof</label>
                        <label class="filter-checkbox"><input type="checkbox" value="breathable"> Breathable</label>
                        <label class="filter-checkbox"><input type="checkbox" value="stretch"> Stretch</label>
                        <label class="filter-checkbox"><input type="checkbox" value="antibacterial"> Anti-bacterial</label>
                        <label class="filter-checkbox"><input type="checkbox" value="uv"> UV Protection</label>
                        <label class="filter-checkbox"><input type="checkbox" value="tearaway"> Tear-away Label</label>
                    </div>
                </div>

                <!-- Size -->
                <div class="filter-expandable" data-filter="size">
                    <div class="filter-expandable__header">
                        <span>Size</span>
                        <span class="filter-expandable__arrow">›</span>
                    </div>
                    <div class="filter-expandable__content filter-sizes-grid">
                        <label class="filter-size"><input type="checkbox" value="xxs"><span>XXS</span></label>
                        <label class="filter-size"><input type="checkbox" value="xs"><span>XS</span></label>
                        <label class="filter-size"><input type="checkbox" value="s"><span>S</span></label>
                        <label class="filter-size"><input type="checkbox" value="m"><span>M</span></label>
                        <label class="filter-size"><input type="checkbox" value="l"><span>L</span></label>
                        <label class="filter-size"><input type="checkbox" value="xl"><span>XL</span></label>
                        <label class="filter-size"><input type="checkbox" value="2xl"><span>2XL</span></label>
                        <label class="filter-size"><input type="checkbox" value="3xl"><span>3XL</span></label>
                        <label class="filter-size"><input type="checkbox" value="4xl"><span>4XL</span></label>
                        <label class="filter-size"><input type="checkbox" value="5xl"><span>5XL</span></label>
                        <label class="filter-size"><input type="checkbox" value="6xl"><span>6XL</span></label>
                        <label class="filter-size"><input type="checkbox" value="onesize"><span>One Size</span></label>
                    </div>
                </div>

                <!-- Fabric -->
                <div class="filter-expandable" data-filter="fabric">
                    <div class="filter-expandable__header">
                        <span>Fabric</span>
                        <span class="filter-expandable__arrow">›</span>
                    </div>
                    <div class="filter-expandable__content">
                        <label class="filter-checkbox"><input type="checkbox" value="cotton100"> 100% Cotton</label>
                        <label class="filter-checkbox"><input type="checkbox" value="polycotton"> Poly/Cotton</label>
                        <label class="filter-checkbox"><input type="checkbox" value="polyester100"> 100% Polyester</label>
                        <label class="filter-checkbox"><input type="checkbox" value="organic"> Organic Cotton</label>
                        <label class="filter-checkbox"><input type="checkbox" value="recycled"> Recycled Polyester</label>
                        <label class="filter-checkbox"><input type="checkbox" value="fleece"> Fleece</label>
                        <label class="filter-checkbox"><input type="checkbox" value="jersey"> Jersey</label>
                        <label class="filter-checkbox"><input type="checkbox" value="pique"> Pique</label>
                        <label class="filter-checkbox"><input type="checkbox" value="frenchTerry"> French Terry</label>
                        <label class="filter-checkbox"><input type="checkbox" value="ripstop"> Ripstop</label>
                        <label class="filter-checkbox"><input type="checkbox" value="softshell"> Softshell</label>
                        <label class="filter-checkbox"><input type="checkbox" value="nylon"> Nylon</label>
                    </div>
                </div>

                <!-- Weight (GSM) -->
                <div class="filter-expandable" data-filter="weight">
                    <div class="filter-expandable__header">
                        <span>Weight (GSM)</span>
                        <span class="filter-expandable__arrow">›</span>
                    </div>
                    <div class="filter-expandable__content">
                        <label class="filter-checkbox"><input type="checkbox" value="light"> Lightweight (&lt;150g)</label>
                        <label class="filter-checkbox"><input type="checkbox" value="mid"> Midweight (150-200g)</label>
                        <label class="filter-checkbox"><input type="checkbox" value="standard"> Standard (200-250g)</label>
                        <label class="filter-checkbox"><input type="checkbox" value="heavy"> Heavy (250-300g)</label>
                        <label class="filter-checkbox"><input type="checkbox" value="superheavy"> Super Heavy (300g+)</label>
                    </div>
                </div>

                <!-- Fit -->
                <div class="filter-expandable" data-filter="fit">
                    <div class="filter-expandable__header">
                        <span>Fit</span>
                        <span class="filter-expandable__arrow">›</span>
                    </div>
                    <div class="filter-expandable__content">
                        <label class="filter-checkbox"><input type="checkbox" value="slim"> Slim Fit</label>
                        <label class="filter-checkbox"><input type="checkbox" value="regular"> Regular Fit</label>
                        <label class="filter-checkbox"><input type="checkbox" value="relaxed"> Relaxed Fit</label>
                        <label class="filter-checkbox"><input type="checkbox" value="loose"> Loose Fit</label>
                        <label class="filter-checkbox"><input type="checkbox" value="tailored"> Tailored</label>
                        <label class="filter-checkbox"><input type="checkbox" value="athletic"> Athletic Fit</label>
                    </div>
                </div>

                <!-- Related Sector -->
                <div class="filter-expandable" data-filter="sector">
                    <div class="filter-expandable__header">
                        <span>Related Sector</span>
                        <span class="filter-expandable__arrow">›</span>
                    </div>
                    <div class="filter-expandable__content">
                        <label class="filter-checkbox"><input type="checkbox" value="construction"> Construction</label>
                        <label class="filter-checkbox"><input type="checkbox" value="healthcare"> Healthcare</label>
                        <label class="filter-checkbox"><input type="checkbox" value="hospitality"> Hospitality</label>
                        <label class="filter-checkbox"><input type="checkbox" value="retail"> Retail</label>
                        <label class="filter-checkbox"><input type="checkbox" value="security"> Security</label>
                        <label class="filter-checkbox"><input type="checkbox" value="transport"> Transport</label>
                        <label class="filter-checkbox"><input type="checkbox" value="warehouse"> Warehouse</label>
                        <label class="filter-checkbox"><input type="checkbox" value="education"> Education</label>
                        <label class="filter-checkbox"><input type="checkbox" value="corporate"> Corporate</label>
                        <label class="filter-checkbox"><input type="checkbox" value="manufacturing"> Manufacturing</label>
                        <label class="filter-checkbox"><input type="checkbox" value="agriculture"> Agriculture</label>
                        <label class="filter-checkbox"><input type="checkbox" value="automotive"> Automotive</label>
                    </div>
                </div>

                <!-- Related Sport -->
                <div class="filter-expandable" data-filter="sport">
                    <div class="filter-expandable__header">
                        <span>Related Sport</span>
                        <span class="filter-expandable__arrow">›</span>
                    </div>
                    <div class="filter-expandable__content">
                        <label class="filter-checkbox"><input type="checkbox" value="football"> Football</label>
                        <label class="filter-checkbox"><input type="checkbox" value="rugby"> Rugby</label>
                        <label class="filter-checkbox"><input type="checkbox" value="running"> Running</label>
                        <label class="filter-checkbox"><input type="checkbox" value="gym"> Gym/Fitness</label>
                        <label class="filter-checkbox"><input type="checkbox" value="golf"> Golf</label>
                        <label class="filter-checkbox"><input type="checkbox" value="tennis"> Tennis</label>
                        <label class="filter-checkbox"><input type="checkbox" value="cricket"> Cricket</label>
                        <label class="filter-checkbox"><input type="checkbox" value="basketball"> Basketball</label>
                        <label class="filter-checkbox"><input type="checkbox" value="cycling"> Cycling</label>
                        <label class="filter-checkbox"><input type="checkbox" value="swimming"> Swimming</label>
                        <label class="filter-checkbox"><input type="checkbox" value="outdoor"> Outdoor</label>
                        <label class="filter-checkbox"><input type="checkbox" value="hiking"> Hiking</label>
                    </div>
                </div>

                <!-- Tag -->
                <div class="filter-expandable" data-filter="tag">
                    <div class="filter-expandable__header">
                        <span>Tag</span>
                        <span class="filter-expandable__arrow">›</span>
                    </div>
                    <div class="filter-expandable__content">
                        <label class="filter-checkbox"><input type="checkbox" value="bestseller"> Best Seller</label>
                        <label class="filter-checkbox"><input type="checkbox" value="newarrival"> New Arrival</label>
                        <label class="filter-checkbox"><input type="checkbox" value="staffpick"> Staff Pick</label>
                        <label class="filter-checkbox"><input type="checkbox" value="eco"> Eco Friendly</label>
                        <label class="filter-checkbox"><input type="checkbox" value="value"> Value Pick</label>
                        <label class="filter-checkbox"><input type="checkbox" value="premium"> Premium</label>
                        <label class="filter-checkbox"><input type="checkbox" value="limited"> Limited Edition</label>
                    </div>
                </div>

                <!-- Effect -->
                <div class="filter-expandable" data-filter="effect">
                    <div class="filter-expandable__header">
                        <span>Effect</span>
                        <span class="filter-expandable__arrow">›</span>
                    </div>
                    <div class="filter-expandable__content">
                        <label class="filter-checkbox"><input type="checkbox" value="plain"> Plain</label>
                        <label class="filter-checkbox"><input type="checkbox" value="printed"> Printed</label>
                        <label class="filter-checkbox"><input type="checkbox" value="embroidered"> Embroidered</label>
                        <label class="filter-checkbox"><input type="checkbox" value="washed"> Washed</label>
                        <label class="filter-checkbox"><input type="checkbox" value="distressed"> Distressed</label>
                        <label class="filter-checkbox"><input type="checkbox" value="tiedye"> Tie-Dye</label>
                        <label class="filter-checkbox"><input type="checkbox" value="camo"> Camo</label>
                        <label class="filter-checkbox"><input type="checkbox" value="striped"> Striped</label>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Apply Button -->
        <div class="filters-dropup__footer">
            <button class="filters-apply-btn" id="filtersApplyBtn">Apply Filters</button>
        </div>
    </div>

    <script>
        console.log('=== SHOP SCRIPT STARTED ===');
        
        // Products Database
        const PRODUCTS_DB = [
            {
                code: "GD067",
                name: "Softstyle™ midweight fleece adult hoodie",
                price: "17.58",
                category: "hoodies",
                image: "https://i.postimg.cc/fbC2Zn4L/GD067-Aquatic-FT.jpg",
                colors: [
                    {name: "Aquatic", main: "https://i.postimg.cc/fbC2Zn4L/GD067-Aquatic-FT.jpg"},
                    {name: "Ash Grey", main: "https://i.postimg.cc/fbC2Zn4t/GD067-Ash-Grey-FT.jpg"},
                    {name: "Black", main: "https://i.postimg.cc/R0ds95rf/GD067-Black-FT.jpg"},
                    {name: "Blue Dusk", main: "https://i.postimg.cc/QMm4sGLJ/GD067-Blue-Dusk-FT.jpg"},
                    {name: "Brown Savana", main: "https://i.postimg.cc/wvBWjfHL/GD067-Brown-Savana-FT.jpg"},
                    {name: "Cardinal Red", main: "https://i.postimg.cc/SsKZxTqV/GD067-Cardinal-Red-FT.jpg"},
                    {name: "Carolina Blue", main: "https://i.postimg.cc/V6N7kG1D/GD067-Carolina-Blue-FT.jpg"},
                    {name: "Cement", main: "https://i.postimg.cc/fLbHR2Z2/GD067-Cement-FT.jpg"},
                    {name: "Charcoal", main: "https://i.postimg.cc/4d38xLZF/GD067-Charcoal-FT.jpg"},
                    {name: "Cobalt", main: "https://i.postimg.cc/sX2ng6yL/GD067-Cobalt-FT.jpg"},
                    {name: "Cocoa", main: "https://i.postimg.cc/d10WVHvb/GD067-Cocoa-FT.jpg"},
                    {name: "Daisy", main: "https://i.postimg.cc/1tzW3Cs1/GD067-Daisy-FT.jpg"},
                    {name: "Dark Heather", main: "https://i.postimg.cc/j5kMwHdk/GD067-Dark-Heather-FT.jpg"},
                    {name: "Dusty Rose", main: "https://i.postimg.cc/fLg8tcTP/GD067-Dusty-Rose-FT.jpg"},
                    {name: "Forest Green", main: "https://i.postimg.cc/FRnTdys8/GD067-Forest-Green-FT.jpg"},
                    {name: "Light Pink", main: "https://i.postimg.cc/G2SX8FhW/GD067-Light-Pink-FT.jpg"},
                    {name: "Maroon", main: "https://i.postimg.cc/zBPxbCG1/GD067-Maroon-FT.jpg"},
                    {name: "Military Green", main: "https://i.postimg.cc/TwHtLV3f/GD067-Military-Green-FT.jpg"},
                    {name: "Mustard", main: "https://i.postimg.cc/MTr9M7pZ/GD067-Mustard-FT.jpg"},
                    {name: "Navy", main: "https://i.postimg.cc/MTr9M7pp/GD067-Navy-FT.jpg"},
                    {name: "Off-White", main: "https://i.postimg.cc/nzw3j4hz/GD067-Off-White-FT.jpg"},
                    {name: "Paragon", main: "https://i.postimg.cc/j5kMwHSL/GD067-Paragon-FT.jpg"},
                    {name: "Pink Lemonade", main: "https://i.postimg.cc/zBPxbCGy/GD067-Pink-Lemonade-FT.jpg"},
                    {name: "Pistachio", main: "https://i.postimg.cc/xCF6Jv1N/GD067-Pistachio-FT.jpg"},
                    {name: "Purple", main: "https://i.postimg.cc/C5BmjRRx/GD067-Purple-FT.jpg"},
                    {name: "Red", main: "https://i.postimg.cc/brD3QZZd/GD067-Red-FT.jpg"},
                    {name: "Sport Grey", main: "https://i.postimg.cc/zvb0nyyg/GD067-Ringspun-Sport-Grey-FT.jpg"},
                    {name: "Royal", main: "https://i.postimg.cc/VNmG3sVH/GD067-Royal-FT.jpg"},
                    {name: "Sage", main: "https://i.postimg.cc/tgpSLRcy/GD067-Sage-FT.jpg"},
                    {name: "Sand", main: "https://i.postimg.cc/Bv4YdZz3/GD067-Sand-FT.jpg"},
                    {name: "Sky", main: "https://i.postimg.cc/YSMnJ2Pc/GD067-Sky-FT.jpg"},
                    {name: "Smoke", main: "https://i.postimg.cc/Xv4HTNPb/GD067-Smoke-FT.jpg"},
                    {name: "Stone Blue", main: "https://i.postimg.cc/g0mSfc72/GD067-Stone-Blue-FT.jpg"},
                    {name: "Tangerine", main: "https://i.postimg.cc/25GcmRpr/GD067-Tangerine-FT.jpg"},
                    {name: "Texas Orange", main: "https://i.postimg.cc/TP07GM8x/GD067-Texas-Orange-FT.jpg"},
                    {name: "White", main: "https://i.postimg.cc/1zBCPhxQ/GD067-White-FT.jpg"},
                    {name: "Yellow Haze", main: "https://i.postimg.cc/W48WjLRN/GD067-Yellow-Haze-FT.jpg"}
                ],
                customization: ["embroidery", "print"],
                brand: "Gildan"
            }
        ];

        // Duplicate for multiple cards (deep copy)
        const originalProduct = PRODUCTS_DB[0];
        while (PRODUCTS_DB.length < 8) {
            PRODUCTS_DB.push(JSON.parse(JSON.stringify(originalProduct)));
        }

        const PRICE_BREAKS_BY_CODE = {
            GD067: [
                { min: 1, max: 9, price: 17.58 },
                { min: 10, max: 24, price: 16.54 },
                { min: 25, max: 49, price: 16.18 },
                { min: 50, max: 99, price: 14.94 },
                { min: 100, max: 249, price: 13.49 },
                { min: 250, max: 99999, price: 12.59 }
            ]
        };

        // Get category from URL
        const urlParams = new URLSearchParams(window.location.search);
        const categoryFilter = urlParams.get('category') || 'all';
        console.log('Category filter:', categoryFilter);
        console.log('Products in DB:', PRODUCTS_DB.length);

        // VAT Functions - will be loaded from mobile.js
        function formatCurrency(baseAmount) {
            const VAT_RATE = 0.20;
            let value = Number(baseAmount) || 0;
            const vatOn = localStorage.getItem('brandeduk-vat-mode') === 'on';
            if (vatOn) {
                value = value * (1 + VAT_RATE);
            }
            return '£' + value.toFixed(2);
        }

        function vatSuffix() {
            const vatOn = localStorage.getItem('brandeduk-vat-mode') === 'on';
            return vatOn ? 'inc VAT' : 'ex VAT';
        }

        function formatPriceRange(minPrice, maxPrice) {
            const minVal = Number(minPrice) || 0;
            const maxVal = Number(maxPrice) || 0;
            if (Math.abs(minVal - maxVal) < 0.005) {
                return formatCurrency(minVal);
            }
            return formatCurrency(minVal) + ' - ' + formatCurrency(maxVal);
        }

        function getProductPriceRange(product) {
            const breaks = PRICE_BREAKS_BY_CODE[product.code];
            if (!breaks || !breaks.length) {
                const base = Number(product.price) || 0;
                return { min: base, max: base };
            }
            const values = breaks.map(step => Number(step.price)).filter(price => price > 0);
            return {
                min: Math.min(...values),
                max: Math.max(...values)
            };
        }

        // Filter products
        function getFilteredProducts() {
            if (categoryFilter === 'all') {
                return PRODUCTS_DB;
            }
            return PRODUCTS_DB.filter(p => p.category === categoryFilter);
        }

        // Render Products
        function renderProducts() {
            const grid = document.getElementById('productsGrid');
            if (!grid) {
                console.error('Grid element not found!');
                return;
            }
            
            const products = getFilteredProducts();
            console.log('Rendering products:', products.length);
            
            // Update title
            const titles = {
                'all': 'All Products',
                'hoodies': 'Hoodies',
                'tshirts': 'T-Shirts',
                'polos': 'Polo Shirts',
                'jackets': 'Jackets'
            };
            document.getElementById('categoryTitle').textContent = titles[categoryFilter] || 'Products';
            document.getElementById('resultsCount').textContent = `${products.length} items`;

            grid.innerHTML = '';

            products.forEach((product, index) => {
                const card = document.createElement('div');
                card.className = 'product-card-shop';

                const badgesLeft = product.customization.filter(c => c === 'print').map(() =>
                    `<span class="badge print">PRINT</span>`
                ).join('');
                
                const badgesRight = product.customization.filter(c => c === 'embroidery').map(() =>
                    `<span class="badge embroidery">EMBROIDERY</span>`
                ).join('');

                const colorIndex = index % product.colors.length;
                const displayColor = product.colors[colorIndex];
                
                const colors = product.colors.map(c => {
                    return `<button type="button" class="color-dot" data-color="${c.name}" data-main="${c.main}" style="background-image: url('${c.main}'); background-size: cover; background-position: center;" title="${c.name}"></button>`;
                }).join('');

                const { min: minPrice, max: maxPrice } = getProductPriceRange(product);

                card.innerHTML = `
                    <div class="product-media">
                        <div class="product-badges-top">
                            ${badgesRight}
                            ${badgesLeft}
                        </div>
                        <div class="product-figure">
                            <img src="${displayColor.main}" alt="${product.name}" class="product-main-img">
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-code">
                            ${product.code}
                            <img src="https://i.postimg.cc/3WpCDK5M/gildan-logo.png" alt="Gildan" class="brand-logo" title="Gildan">
                        </div>
                        <div class="product-name">${product.name}</div>
                        <div class="product-price" data-price-min="${minPrice}" data-price-max="${maxPrice}">
                            <span class="product-price-label">Start From</span>
                            <span class="product-price-value">${formatPriceRange(minPrice, maxPrice)}</span>
                            <span class="product-price-suffix">${vatSuffix()}</span>
                        </div>
                        <div class="product-colors">${colors}</div>
                    </div>
                `;

                let selectedColor = null;
                
                card.querySelectorAll('.color-dot').forEach(dot => {
                    dot.addEventListener('mouseenter', () => {
                        if (!selectedColor) {
                            const img = card.querySelector('.product-main-img');
                            if (img) img.src = dot.dataset.main;
                        }
                    });
                    
                    dot.addEventListener('mouseleave', () => {
                        if (selectedColor) {
                            const img = card.querySelector('.product-main-img');
                            const activeDot = card.querySelector('.color-dot.active');
                            if (img && activeDot) img.src = activeDot.dataset.main;
                        }
                    });
                    
                    dot.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const img = card.querySelector('.product-main-img');
                        if (img) img.src = dot.dataset.main;
                        card.querySelectorAll('.color-dot').forEach(d => d.classList.remove('active'));
                        dot.classList.add('active');
                        selectedColor = {
                            name: dot.dataset.color,
                            url: dot.dataset.main
                        };
                    });
                });

                card.addEventListener('click', () => {
                    console.log('Card clicked, going directly to customize:', product.code);
                    sessionStorage.setItem('selectedProduct', product.code);
                    sessionStorage.setItem('selectedProductData', JSON.stringify(product));
                    const activeColorDot = card.querySelector('.color-dot.active');
                    if (activeColorDot) {
                        sessionStorage.setItem('selectedColorName', activeColorDot.dataset.color);
                        sessionStorage.setItem('selectedColorUrl', activeColorDot.dataset.main);
                        console.log('Selected color:', activeColorDot.dataset.color);
                    }
                    console.log('Navigating to customize.html');
                    window.location.href = 'customize.html';
                });

                grid.appendChild(card);
            });
        }

        // Update prices on VAT change
        function updatePrices() {
            document.querySelectorAll('.product-price').forEach(priceEl => {
                const min = Number(priceEl.dataset.priceMin);
                const max = Number(priceEl.dataset.priceMax);
                const valueEl = priceEl.querySelector('.product-price-value');
                if (valueEl && Number.isFinite(min) && Number.isFinite(max)) {
                    valueEl.textContent = formatPriceRange(min, max);
                }
                const suffixEl = priceEl.querySelector('.product-price-suffix');
                if (suffixEl) {
                    suffixEl.textContent = vatSuffix();
                }
            });
        }

        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                console.log('DOMContentLoaded - rendering products...');
                renderProducts();
                updateBasketBadge();
            });
        } else {
            console.log('DOM already ready - rendering products immediately...');
            setTimeout(() => {
                renderProducts();
                updateBasketBadge();
            }, 0);
        }

        window.addEventListener('vatToggleChanged', () => {
            console.log('VAT toggle changed - updating prices');
            updatePrices();
        });

        // Initialize VAT toggle from mobile.js when it loads
        document.addEventListener('DOMContentLoaded', () => {
            // Wait for mobile.js to initialize, then sync
            setTimeout(() => {
                updatePrices();
            }, 100);
        });
        
        // Update basket badge count
        function updateBasketBadge() {
            const basket = JSON.parse(localStorage.getItem('quoteBasket') || '[]');
            let totalItems = 0;
            
            basket.forEach(item => {
                const sizes = item.sizes || item.quantities || {};
                totalItems += Object.values(sizes).reduce((sum, q) => sum + q, 0);
            });
            
            const badge = document.getElementById('navBasketBadge');
            if (badge) {
                if (totalItems > 0) {
                    badge.textContent = totalItems > 99 ? '99+' : totalItems;
                    badge.style.display = 'flex';
                } else {
                    badge.style.display = 'none';
                }
            }
        }
        
        // Category Filter Functionality
        (function() {
            const filterButtons = document.querySelectorAll('.category-filter-card');
            const productsGrid = document.getElementById('productsGrid');
            const categoryTitleEl = document.getElementById('categoryTitle');
            const resultsCountEl = document.getElementById('resultsCount');
            
            filterButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const category = this.dataset.category;
                    
                    // Animate button press
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => { this.style.transform = ''; }, 150);
                    
                    // Update active state with animation
                    filterButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Update URL without reload
                    const url = new URL(window.location);
                    url.searchParams.set('category', category);
                    window.history.replaceState({}, '', url);
                    
                    // Update global filter and re-render
                    categoryFilter = category;
                    
                    // Fade out current products
                    const currentCards = productsGrid.querySelectorAll('.product-card-shop');
                    currentCards.forEach(card => {
                        card.style.transition = 'opacity 0.2s ease, transform 0.2s ease';
                        card.style.opacity = '0';
                        card.style.transform = 'translateY(-10px)';
                    });
                    
                    // Re-render after fade out
                    setTimeout(() => {
                        renderProducts();
                        
                        // Animate new cards in
                        const newCards = productsGrid.querySelectorAll('.product-card-shop');
                        newCards.forEach((card, i) => {
                            card.style.opacity = '0';
                            card.style.transform = 'translateY(20px)';
                            setTimeout(() => {
                                card.style.transition = 'opacity 0.4s ease, transform 0.4s ease';
                                card.style.opacity = '1';
                                card.style.transform = 'translateY(0)';
                            }, i * 50);
                        });
                    }, 250);
                    
                    // Scroll to show filter is selected
                    this.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
                });
            });
            
            // Check URL for initial category and set filter
            const urlParams = new URLSearchParams(window.location.search);
            const initialCategory = urlParams.get('category') || 'all';
            categoryFilter = initialCategory;
            
            // Set active button
            filterButtons.forEach(b => {
                b.classList.remove('active');
                if (b.dataset.category === initialCategory) {
                    b.classList.add('active');
                }
            });
        })();
        
        // Tablet Social Icons - Single/Double Click
        document.addEventListener('DOMContentLoaded', function() {
            const tabletSocialIcons = document.querySelectorAll('.tablet-top-bar .social-icon');
            let clickTimer = null;
            let clickCount = 0;
            let lastClickedIcon = null;
            
            tabletSocialIcons.forEach(icon => {
                icon.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    if (lastClickedIcon !== icon) {
                        clickCount = 0;
                        lastClickedIcon = icon;
                    }
                    
                    clickCount++;
                    
                    if (clickCount === 1) {
                        // Single click - toggle active
                        clickTimer = setTimeout(() => {
                            icon.classList.toggle('active');
                            clickCount = 0;
                        }, 300);
                    } else if (clickCount === 2) {
                        // Double click - open link
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        const href = icon.getAttribute('href');
                        if (href) {
                            window.open(href, '_blank', 'noopener,noreferrer');
                        }
                    }
                });
            });
            
            // Click outside to deactivate
            document.addEventListener('click', function(e) {
                const topBar = document.querySelector('.tablet-top-bar');
                if (topBar && !topBar.contains(e.target)) {
                    tabletSocialIcons.forEach(icon => icon.classList.remove('active'));
                }
            });
        });
    </script>
    <script src="mobile/js/mobile.js?v=20251230"></script>
</body>
</html>
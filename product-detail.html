<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details - Branded UK</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="brandedukv15-child/assets/css/components/header.css?v=20251230">
    <link rel="stylesheet" href="brandedukv15-child/assets/css/pages/product.css?v=20251230">
    <link rel="stylesheet" href="brandedukv15-child/assets/css/pages/customize-positions.css?v=20260107">
    <link rel="stylesheet" href="brandedukv15-child/assets/css/pages/customize-positions-desktop.css?v=20260107">
    <style>
        /* Logo e Search expand per header uniforme */
        .searchbar-header__brand-img { width: 40px; height: 40px; object-fit: contain; }
        .searchbar-header__brand-text { color: #a855f7 !important; }
        
        .searchbar-header__search-expand {
            position: relative;
            width: 44px;
            height: 44px;
            transition: width 0.3s ease-in-out;
            margin-right: 8px;
        }
        .searchbar-header__search-expand:focus-within { width: 320px; }
        .searchbar-header__search-expand .search-input-expand {
            position: absolute;
            right: 0;
            top: 0;
            width: 100%;
            height: 100%;
            border: none;
            outline: none;
            border-radius: 9999px;
            padding: 12px 44px 12px 20px;
            font-size: 15px;
            background: #f3f4f6;
            color: #1f2937;
            box-sizing: border-box;
        }
        .searchbar-header__search-expand .search-input-expand::placeholder { color: transparent; transition: color 0.2s ease; }
        .searchbar-header__search-expand:focus-within .search-input-expand::placeholder { color: #9ca3af; }
        .searchbar-header__search-expand .search-icon-expand {
            position: absolute;
            top: 50%;
            right: 12px;
            transform: translateY(-50%);
            pointer-events: none;
            color: #6b7280;
            transition: color 0.2s ease;
        }
        .searchbar-header__search-expand:focus-within .search-icon-expand { color: #a855f7; }

        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            background: #f3f4f6;
            color: #374151;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
        }

        .back-bar {
            padding: 12px 0;
        }

        .back-bar .header-container {
            max-width: 1440px;
            margin: 0 auto;
            padding: 0 24px;
        }

        .back-btn:hover {
            background: #e5e7eb;
            color: #1f2937;
            border-color: #d1d5db;
        }

        .back-btn svg {
            width: 16px;
            height: 16px;
        }

        /* Breadcrumb Navigation */
        .breadcrumb-bar {
            background: #f9fafb;
            border-bottom: 1px solid #e5e7eb;
            padding: 12px 0;
        }

        .breadcrumb-bar .header-container {
            max-width: 1440px;
            margin: 0 auto;
            padding: 0 24px;
        }

        .breadcrumb-nav {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #6b7280;
        }

        .breadcrumb-link {
            color: #6b7280;
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .breadcrumb-link:hover {
            color: #7c3aed;
        }

        .breadcrumb-separator {
            color: #9ca3af;
            margin: 0 4px;
        }

        .breadcrumb-current {
            color: #1f2937;
            font-weight: 500;
        }
        /* Social buttons header - 3D Neumorphic style like main page */
        .header-social-3d {
            display: flex !important;
            align-items: center !important;
            gap: 8px !important;
        }
        .header-social-3d .social-icon-3d {
            --icon-size: 32px;
            width: var(--icon-size) !important;
            height: var(--icon-size) !important;
            border-radius: 10px !important;
            background: linear-gradient(145deg, #f0f0f0, #cacaca) !important;
            box-shadow: 
                4px 4px 8px rgba(0,0,0,0.15),
                -4px -4px 8px rgba(255,255,255,0.9) !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            color: #555 !important;
            font-size: 14px !important;
            text-decoration: none !important;
            transition: all 0.3s ease !important;
        }
        .header-social-3d .social-icon-3d:hover {
            box-shadow: 
                inset 3px 3px 6px rgba(0,0,0,0.1),
                inset -3px -3px 6px rgba(255,255,255,0.7) !important;
            transform: scale(0.95) !important;
        }
        .header-social-3d .social-icon-3d.facebook:hover { color: #1877F2 !important; }
        .header-social-3d .social-icon-3d.instagram:hover { color: #E4405F !important; }
        .header-social-3d .social-icon-3d.linkedin:hover { color: #0A66C2 !important; }
        .header-social-3d .social-icon-3d.youtube:hover { color: #FF0000 !important; }
        .header-social-3d .social-icon-3d.pinterest:hover { color: #BD081C !important; }
        
        /* EXCLUSIVES MEGAMENU */
        .exclusives-menu { position: relative; }
        .exclusives-dropdown {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(10px);
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            padding: 24px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
            min-width: 600px;
        }
        .exclusives-menu:hover .exclusives-dropdown {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0);
        }
        .exclusives-dropdown-title {
            font-size: 18px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 16px;
            text-align: center;
        }
        .exclusives-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 16px;
        }
        .exclusive-brand {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 90px;
            height: 90px;
            border-radius: 50%;
            background: #f3f4f6;
            padding: 12px;
            transition: all 0.3s ease;
            filter: grayscale(100%);
        }
        .exclusive-brand:hover {
            background: #e5e7eb;
            transform: scale(1.08);
            filter: grayscale(0%);
            box-shadow: 0 8px 24px rgba(0,0,0,0.12);
        }
        .exclusive-brand img {
            max-width: 60px;
            max-height: 60px;
            object-fit: contain;
        }
        
        /* Header top phone */
        .header-top-phone {
            color: #4b5563;
            text-decoration: none;
            font-size: 13px;
            font-weight: 500;
            transition: color 0.2s;
        }
        .header-top-phone:hover { color: #7c3aed; }
        /* Header Top Basket */
        .header-top-basket { position: relative; margin-left: 16px; }
        .header-top-basket-btn {
            display: flex;
            align-items: center;
            gap: 4px;
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 6px;
            color: #7c3aed;
            transition: all 0.2s ease;
        }
        .header-top-basket-btn:hover { background: rgba(124, 58, 237, 0.1); color: #a855f7; }
        .header-top-basket-btn svg { stroke: currentColor; fill: none; }
        .header-top-basket-badge {
            background: #f97316;
            color: white;
            font-size: 10px;
            font-weight: 600;
            min-width: 16px;
            height: 16px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 4px;
        }
        .header-top-basket-badge:empty, .header-top-basket-badge[data-count="0"] { display: none; }
        .header-basket-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            width: 320px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: all 0.2s ease;
        }
        .header-top-basket:hover .header-basket-dropdown, .header-basket-dropdown.active { opacity: 1; visibility: visible; transform: translateY(4px); }
        .header-basket-dropdown-header { display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; border-bottom: 1px solid #e5e7eb; }
        .header-basket-title { font-weight: 600; color: #1f2937; font-size: 14px; }
        .header-basket-clear { background: none; border: none; color: #ef4444; font-size: 12px; cursor: pointer; padding: 4px 8px; border-radius: 4px; transition: background 0.2s; }
        .header-basket-clear:hover { background: #fef2f2; }
        .header-basket-items { max-height: 280px; overflow-y: auto; padding: 8px; }
        .header-basket-empty { text-align: center; color: #9ca3af; padding: 24px; font-size: 13px; }
        .header-basket-dropdown-footer { padding: 12px 16px; border-top: 1px solid #e5e7eb; }
        .header-basket-view-btn { display: block; text-align: center; background: #7c3aed; color: white; padding: 10px; border-radius: 8px; font-size: 13px; font-weight: 600; text-decoration: none; transition: background 0.2s; }
        .header-basket-view-btn:hover { background: #6d28d9; }
        /* Account icon in searchbar */
        .searchbar-header__account .searchbar-header__action-ring { background: #7c3aed; }
        .searchbar-header__account .searchbar-header__action-icon { stroke: #fff; fill: none; stroke-width: 2; }
        
        /* ===== ACCOUNT PANEL - DESKTOP ===== */
        .account-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 9998;
        }
        .account-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .account-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: transparent;
            border-radius: 20px;
            width: 600px;
            max-width: 90vw;
            height: 500px;
            max-height: 80vh;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 9999;
            overflow: hidden;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.3);
        }
        .account-panel.active {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }
        .account-panel-header {
            position: absolute;
            top: 16px;
            right: 16px;
            z-index: 10;
        }
        .account-close-btn {
            width: 44px;
            height: 44px;
            border: none;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .account-close-btn:hover {
            background: rgba(0, 0, 0, 0.5);
            transform: scale(1.05);
        }
        .account-close-btn svg { stroke: #fff; }
        .account-forms-container {
            display: flex;
            align-items: stretch;
            height: 100%;
            position: relative;
            overflow: hidden;
        }
        .account-arrow {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            width: 44px;
            height: 44px;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 50%;
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            opacity: 0;
            visibility: hidden;
        }
        .account-arrow.visible { opacity: 1; visibility: visible; }
        .account-arrow:hover { background: rgba(0, 0, 0, 0.4); }
        .account-arrow svg { stroke: #fff; }
        .account-forms-wrapper {
            flex: 1;
            display: flex;
            overflow: hidden;
            width: 100%;
            position: relative;
        }
        .account-form-holder {
            flex-basis: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            cursor: pointer;
            padding: 24px;
        }
        .account-form-holder:hover { flex-basis: 55%; }
        .signin-form { background: linear-gradient(135deg, #8455f4 0%, #6b21a8 100%); }
        .signup-form { background: linear-gradient(135deg, #3e4357 0%, #1f2937 100%); }
        .account-form-icon {
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            transition: all 0.3s ease;
        }
        .account-form-icon svg { stroke: #fff; }
        .account-form-icon span { font-size: 1.1rem; font-weight: 600; }
        .account-form-content {
            position: absolute;
            width: 85%;
            top: 100%;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .account-form-holder.active {
            flex-basis: 100%;
            position: absolute;
            inset: 0;
            z-index: 2;
        }
        .account-form-holder.active .account-form-icon {
            position: absolute;
            top: 24px;
            left: 24px;
            flex-direction: row;
            gap: 12px;
        }
        .account-form-holder.active .account-form-icon svg { width: 28px; height: 28px; }
        .account-form-holder.active .account-form-icon span { font-size: 1rem; }
        .account-form-holder.active .account-form-content {
            top: 80px;
            opacity: 1;
            width: 80%;
            max-width: 400px;
            left: 50%;
            transform: translateX(-50%);
        }
        .account-form-holder.inactive { flex-basis: 0%; opacity: 0; pointer-events: none; }
        .account-input-group { position: relative; margin-bottom: 28px; }
        .account-input-group.half { flex: 1; }
        .account-input-row { display: flex; gap: 16px; }
        .account-input-group label {
            position: absolute;
            top: 0;
            left: 0;
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            transition: all 0.3s ease;
            pointer-events: none;
        }
        .account-input-group input {
            width: 100%;
            padding: 10px 0;
            background: transparent;
            border: none;
            border-bottom: 1px solid rgba(255, 255, 255, 0.5);
            color: #fff;
            font-size: 15px;
            outline: none;
        }
        .account-input-group input:focus,
        .account-input-group input:valid { border-bottom-color: #fff; }
        .account-input-group input:focus + label,
        .account-input-group input:valid + label { top: -20px; font-size: 11px; color: rgba(255, 255, 255, 0.9); }
        .account-form-actions { display: flex; justify-content: flex-end; margin-top: 20px; }
        .account-submit-btn {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .account-submit-btn:hover { background: rgba(0, 0, 0, 0.5); transform: scale(1.05); }
        .account-submit-btn svg { stroke: #fff; }
        .account-forgot-link { display: block; margin-top: 20px; color: rgba(255, 255, 255, 0.7); font-size: 13px; text-decoration: none; transition: color 0.2s; }
        .account-forgot-link:hover { color: #fff; }
        .account-logged-in { padding: 50px 40px; text-align: center; background: #fff; height: 100%; }
        .account-user-avatar { margin-bottom: 16px; }
        .account-user-name { font-size: 24px; font-weight: 700; color: #1f2937; margin-bottom: 4px; }
        .account-user-email { font-size: 14px; color: #6b7280; margin-bottom: 24px; }
        .account-user-details { text-align: left; background: #f9fafb; border-radius: 12px; padding: 20px; margin-bottom: 24px; }
        .account-user-details p { font-size: 14px; color: #4b5563; margin-bottom: 8px; }
        .account-user-details p:last-child { margin-bottom: 0; }
        .account-user-details strong { color: #1f2937; }
        .account-logout-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 14px 28px;
            background: #ef4444;
            border: none;
            border-radius: 12px;
            color: #fff;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .account-logout-btn:hover { background: #dc2626; transform: translateY(-2px); }
        
        /* ===== IMAGE LIGHTBOX / ZOOM POPUP ===== */
        .image-lightbox-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 99999;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        .image-lightbox-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .image-lightbox-container {
            position: relative;
            background: #fff;
            border-radius: 12px;
            padding: 20px;
            max-width: 600px;
            max-height: 85vh;
            width: 90%;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        .image-lightbox-overlay.active .image-lightbox-container {
            transform: scale(1);
        }
        .image-lightbox-close {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 32px;
            height: 32px;
            background: #f3f4f6;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            z-index: 10;
        }
        .image-lightbox-close:hover {
            background: #e5e7eb;
            transform: scale(1.1);
        }
        .image-lightbox-close svg {
            stroke: #6b7280;
        }
        .image-lightbox-img {
            max-width: 100%;
            max-height: 60vh;
            object-fit: contain;
            border-radius: 8px;
        }
        .image-lightbox-close-btn {
            margin-top: 16px;
            padding: 10px 32px;
            background: #0ea5e9;
            color: #fff;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .image-lightbox-close-btn:hover {
            background: #0284c7;
        }
        /* Zoom button on main image */
        .product-main {
            position: relative;
        }
        .zoom-btn {
            position: absolute;
            bottom: 16px;
            right: 16px;
            width: 44px;
            height: 44px;
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid #e5e7eb;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.2s ease;
            z-index: 10;
        }
        .zoom-btn:hover {
            background: #7c3aed;
            border-color: #7c3aed;
            transform: scale(1.1);
        }
        .zoom-btn:hover svg {
            stroke: #fff;
        }
        .zoom-btn svg {
            stroke: #4b5563;
            transition: stroke 0.2s ease;
        }
        /* Mobile/Tablet responsive */
        @media (max-width: 1023px) {
            .image-lightbox-container {
                max-width: 90%;
                padding: 16px;
            }
            .image-lightbox-img {
                max-height: 55vh;
            }
            .zoom-btn {
                width: 40px;
                height: 40px;
                bottom: 12px;
                right: 12px;
            }
        }
        /* Apron-specific logo positioning for low-left and low-right */
        /* These positions are lower on the apron (near the bottom of the bib area, around pocket level) */
        .logo-overlay-box.apron-low-left {
            top: 70%;
            left: 28%;
            width: 28px;
            height: 28px;
        }
        
        .logo-overlay-box.apron-low-right {
            top: 70%;
            left: 72%;
            width: 28px;
            height: 28px;
        }
        
        /* Inline section (product detail page) apron positioning */
        #step3PositionsSection .logo-overlay-box.apron-low-left {
            top: calc(70% + 25px);
            left: 28%;
            width: 28px;
            height: 28px;
        }
        
        #step3PositionsSection .logo-overlay-box.apron-low-right {
            top: calc(70% + 25px);
            left: 72%;
            width: 28px;
            height: 28px;
        }
    </style>
</head>
<body>

<header class="site-header">
    <div class="header-top">
        <div class="header-container">
            <div class="header-top-left">
                <div class="header-social-3d">
                    <a href="https://www.facebook.com/profile.php?id=100083540654262" class="social-icon-3d facebook" target="_blank" rel="noopener" aria-label="Facebook">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="https://www.instagram.com/brandeduk_workwear/" class="social-icon-3d instagram" target="_blank" rel="noopener" aria-label="Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="https://www.linkedin.com/in/anderson-ricotta-92a394321/" class="social-icon-3d linkedin" target="_blank" rel="noopener" aria-label="LinkedIn">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                    <a href="https://www.youtube.com/@barudanamericainc3060" class="social-icon-3d youtube" target="_blank" rel="noopener" aria-label="YouTube">
                        <i class="fab fa-youtube"></i>
                    </a>
                    <a href="https://uk.pinterest.com/search/pins/?q=embroidery%20polo&rs=typed" class="social-icon-3d pinterest" target="_blank" rel="noopener" aria-label="Pinterest">
                        <i class="fab fa-pinterest-p"></i>
                    </a>
                </div>
            </div>
            <div class="header-top-right">
                <a class="header-top-email" href="mailto:info@brandeduk.com">info@brandeduk.com</a>
                <nav class="header-top-links" aria-label="utility navigation">
                    <a href="tel:02089742722" class="header-top-phone">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                        </svg>
                        0208 974 2722
                    </a>
                    <div class="header-top-vat-control" role="group" aria-label="Toggle VAT pricing">
                        <button class="header-top-vat-toggle" type="button" aria-pressed="false" aria-label="Toggle VAT pricing">
                            <span class="header-top-vat-toggle__label header-top-vat-toggle__label--exc" data-vat-exc>exc vat</span>
                            <span class="header-top-vat-toggle__thumb" aria-hidden="true"></span>
                            <span class="header-top-vat-toggle__label header-top-vat-toggle__label--inc" data-vat-inc>inc vat</span>
                        </button>
                    </div>
                    <a class="header-top-basket-link" href="brandeduk.com/customize-positions-pc.html" aria-label="View quote">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 6h15l-1.5 9h-12z"/>
                            <circle cx="9" cy="20" r="1"/>
                            <circle cx="18" cy="20" r="1"/>
                            <path d="M6 6L5 3H2"/>
                        </svg>
                        <span class="header-top-basket-badge" id="headerBasketBadge">0</span>
                    </a>
                </nav>
            </div>
        </div>
    </div>

    <div class="searchbar-header">
        <div class="searchbar-header__surface">
            <div class="searchbar-header__inner">
                <a class="searchbar-header__brand" href="home-pc.html" aria-label="brandedUK home">
                    <img class="searchbar-header__brand-img" src="brandedukv15-child/assets/images/ui/bd-logo-3d.png" alt="BD" aria-hidden="true">
                    <span class="searchbar-header__brand-text">branded<span class="searchbar-header__brand-text-highlight">UK</span></span>
                </a>

                <div class="searchbar-header__actions">
                    <div class="searchbar-header__search-expand">
                        <input type="text" class="search-input-expand" placeholder="Search products, brands, categories..." id="searchbarHeaderInput">
                        <svg class="search-icon-expand" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                    </div>

                    <a class="searchbar-header__action" href="tel:02089742722" aria-label="Call us">
                        <span class="searchbar-header__action-ring is-animating">
                            <svg class="searchbar-header__action-icon" viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M6.6 10.8c1.4 2.8 3.8 5.1 6.6 6.6l2.2-2.2c.3-.3.7-.4 1-.2 1.1.4 2.3.6 3.6.6.5 0 1 .4 1 1V20c0 .5-.5 1-1 1-9.4 0-17-7.6-17-17 0-.6.4-1 1-1h3.5c.5 0 1 .4 1 1 0 1.2.2 2.5.6 3.6.1.4 0 .7-.2 1l-2.3 2.2z"></path>
                            </svg>
                        </span>
                    </a>

                    <a class="searchbar-header__action" href="#" data-open-tawk="1" aria-label="Chat with us">
                        <span class="searchbar-header__action-ring is-animating">
                            <svg class="searchbar-header__action-icon searchbar-header__action-icon--whatsapp" viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M12 2C6.48 2 2 6.33 2 11.82c0 1.98.56 3.85 1.6 5.47L2 22l4.89-1.53C8.41 21.4 10.18 21.8 12 21.8c5.52 0 10-4.33 10-9.98C22 6.33 17.52 2 12 2zm0 17.45c-1.65 0-3.27-.45-4.68-1.3l-.34-.2-2.9.91.94-2.8-.22-.36a8.02 8.02 0 0 1-1.23-4.26c0-4.37 3.58-7.92 8.02-7.92 4.41 0 7.98 3.55 7.98 7.92 0 4.37-3.57 8.01-7.97 8.01zm4.55-5.58c-.25-.12-1.48-.73-1.71-.81-.23-.08-.4-.12-.57.12-.17.25-.66.81-.81.98-.15.17-.29.19-.54.07-.25-.12-1.04-.41-1.98-1.3-.73-.66-1.22-1.47-1.37-1.72-.15-.25-.02-.38.11-.5.11-.1.25-.27.38-.4.12-.13.17-.23.25-.39.08-.17.04-.31-.02-.43-.06-.12-.57-1.37-.78-1.88-.21-.5-.42-.43-.57-.44-.15-.01-.32-.02-.49-.02-.17 0-.45.06-.68.31-.23.25-.9.88-.9 2.14s.92 2.49 1.05 2.66c.13.17 1.81 2.87 4.38 3.97.61.26 1.08.41 1.45.52.61.19 1.16.16 1.6.1.49-.07 1.49-.61 1.7-1.2.21-.59.21-1.1.15-1.2-.06-.1-.22-.16-.47-.28z"></path>
                            </svg>
                        </span>
                    </a>

                    <a class="searchbar-header__action searchbar-header__account" href="#" aria-label="My Account" id="accountBtn">
                        <span class="searchbar-header__action-ring is-animating">
                            <svg class="searchbar-header__action-icon" viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                                <circle cx="12" cy="7" r="4"/>
                            </svg>
                        </span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="header-bottom sticky-header">
        <div class="header-container">
            <div class="category-dropdown has-border" data-visible="false">
                <button type="button" class="category-toggle" aria-haspopup="true" aria-expanded="false" title="Browse Categories">
                    <span class="category-toggle-icon" aria-hidden="true"></span>
                    <span class="category-toggle-label">Browse Categories</span>
                    <span class="category-toggle-caret" aria-hidden="true"></span>
                </button>
                <div class="dropdown-box" role="region" aria-label="Browse categories">
                    <ul class="menu vertical-menu category-menu">
                        <li class="has-children">
                            <a href="shop-pc.html?productType=tshirts" data-product-type="t-shirts">
                                <img class="category-icon" src="brandedukv15-child/assets/images/ui/icons/categories/icon-shirt-71%201.png" alt="" aria-hidden="true">
                                <span class="category-text">T-Shirts</span>
                                <span class="category-caret" aria-hidden="true"></span>
                            </a>
                            <ul class="megamenu">
                                <li>
                                    <ul>
                                        <li><a href="#">Crew Neck</a></li>
                                        <li><a href="#">Heavyweight / Workwear</a></li>
                                        <li><a href="#">Kids T-shirts</a></li>
                                        <li><a href="#">Lightweight</a></li>
                                        <li><a href="#">Long Sleeve T-shirts</a></li>
                                        <li><a href="#">Performance / Sports</a></li>
                                        <li><a href="#">Short Sleeve T-shirts</a></li>
                                        <li><a href="#">Tank Tops</a></li>
                                        <li><a href="#">T-shirts for Embroidery</a></li>
                                        <li><a href="#">T-shirts for Print</a></li>
                                        <li><a href="#">V-Neck</a></li>
                                        <li><a href="#">Women's T-shirts</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="has-children">
                            <a href="shop-pc.html?productType=polos" data-product-type="polos">
                                <img class="category-icon" src="brandedukv15-child/assets/images/ui/icons/categories/Polo.png" alt="" aria-hidden="true">
                                <span class="category-text">Polo Shirts</span>
                                <span class="category-caret" aria-hidden="true"></span>
                            </a>
                            <ul class="megamenu">
                                <li>
                                    <ul>
                                        <li><a href="#">Classic Cotton Polos</a></li>
                                        <li><a href="#">Kids Polos</a></li>
                                        <li><a href="#">Long Sleeve Polos</a></li>
                                        <li><a href="#">Performance Polos</a></li>
                                        <li><a href="#">Poly Cotton Polos</a></li>
                                        <li><a href="#">Polos for Embroidery</a></li>
                                        <li><a href="#">Short Sleeve Polos</a></li>
                                        <li><a href="#">Slim Fit Polos</a></li>
                                        <li><a href="#">Women's Polos</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="has-children">
                            <a href="shop-pc.html?productType=hoodies" data-product-type="hoodies">
                                <img class="category-icon" src="brandedukv15-child/assets/images/ui/icons/categories/icon-hoodies-71%201.png" alt="" aria-hidden="true">
                                <span class="category-text">Hoodies &amp; Sweatshirts</span>
                                <span class="category-caret" aria-hidden="true"></span>
                            </a>
                            <ul class="megamenu">
                                <li>
                                    <ul>
                                        <li><a href="#">Heavyweight Hoodies</a></li>
                                        <li><a href="#">Kids Hoodies</a></li>
                                        <li><a href="#">Lightweight Hoodies</a></li>
                                        <li><a href="#">Premium / Workwear Hoodies</a></li>
                                        <li><a href="#">Pullover Hoodies</a></li>
                                        <li><a href="#">Sweatshirts (Crew Neck)</a></li>
                                        <li><a href="#">Women's Hoodies</a></li>
                                        <li><a href="#">Zip Hoodies</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="has-children">
                            <a href="shop-pc.html?productType=jackets" data-product-type="jackets">
                                <img class="category-icon" src="brandedukv15-child/assets/images/ui/icons/categories/Jacket.png" alt="" aria-hidden="true">
                                <span class="category-text">Jackets &amp; Softshell</span>
                                <span class="category-caret" aria-hidden="true"></span>
                            </a>
                            <ul class="megamenu">
                                <li>
                                    <ul>
                                        <li><a href="#">Bodywarmers / Gilets</a></li>
                                        <li><a href="#">Bomber Jackets</a></li>
                                        <li><a href="#">Fleece Jackets</a></li>
                                        <li><a href="#">High-performance Jackets</a></li>
                                        <li><a href="#">Softshell Jackets</a></li>
                                        <li><a href="#">Waterproof Jackets</a></li>
                                        <li><a href="#">Windbreakers</a></li>
                                        <li><a href="#">Women's Jackets</a></li>
                                        <li><a href="#">Workwear Jackets</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="has-children">
                            <a href="shop-pc.html?productType=safety-vests" data-product-type="safety-vests">
                                <img class="category-icon" src="brandedukv15-child/assets/images/ui/icons/categories/Hi%20Vis.png" alt="" aria-hidden="true">
                                <span class="category-text">Hi-Vis Clothing</span>
                                <span class="category-caret" aria-hidden="true"></span>
                            </a>
                            <ul class="megamenu">
                                <li>
                                    <ul>
                                        <li><a href="#">EN ISO 20471 Certified</a></li>
                                        <li><a href="#">Hi-vis Hoodies</a></li>
                                        <li><a href="#">Hi-vis Jackets</a></li>
                                        <li><a href="#">Hi-vis Polos</a></li>
                                        <li><a href="#">Hi-vis T-shirts</a></li>
                                        <li><a href="#">Hi-vis Trousers</a></li>
                                        <li><a href="#">Hi-vis Vests</a></li>
                                        <li><a href="#">RIS-3279 Rail</a></li>
                                        <li><a href="#">Waterproof Hi-Vis</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="has-children">
                            <a href="shop-pc.html?productType=trousers" data-product-type="trousers">
                                <img class="category-icon" src="brandedukv15-child/assets/images/ui/icons/categories/Trousers.png" alt="" aria-hidden="true">
                                <span class="category-text">Work Trousers</span>
                                <span class="category-caret" aria-hidden="true"></span>
                            </a>
                            <ul class="megamenu">
                                <li>
                                    <ul>
                                        <li><a href="#">Cargo Pants</a></li>
                                        <li><a href="#">Ripstop Trousers</a></li>
                                        <li><a href="#">Stretch Work Trousers</a></li>
                                        <li><a href="#">Waterproof / Over-trousers</a></li>
                                        <li><a href="#">Work Shorts</a></li>
                                        <li><a href="#">Work Trousers</a></li>
                                        <li><a href="#">Women's Work Trousers</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="has-children">
                            <a href="shop-pc.html?productType=aprons" data-product-type="aprons">
                                <img class="category-icon" src="brandedukv15-child/assets/images/ui/icons/categories/Apron.png" alt="" aria-hidden="true">
                                <span class="category-text">Work &amp; Uniforms</span>
                                <span class="category-caret" aria-hidden="true"></span>
                            </a>
                            <ul class="megamenu">
                                <li>
                                    <ul>
                                        <li><a href="#">Work Trousers</a></li>
                                        <li><a href="#">Workwear Jackets</a></li>
                                        <li><a href="#">Workwear Hoodies</a></li>
                                        <li><a href="#">Work Accessories</a></li>
                                        <li><a href="shop.html?category=aprons">Aprons</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="has-children">
                            <a href="shop-pc.html?productType=fleece" data-product-type="fleece">
                                <img class="category-icon" src="brandedukv15-child/assets/images/ui/icons/categories/Fleece.png" alt="" aria-hidden="true">
                                <span class="category-text">Fleeces</span>
                                <span class="category-caret" aria-hidden="true"></span>
                            </a>
                            <ul class="megamenu">
                                <li>
                                    <ul>
                                        <li><a href="#">Full Zip Fleece</a></li>
                                        <li><a href="#">Half Zip Fleece</a></li>
                                        <li><a href="#">Heavy Fleece</a></li>
                                        <li><a href="#">Kids Fleece</a></li>
                                        <li><a href="#">Microfleece Jackets</a></li>
                                        <li><a href="#">Women's Fleece</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="has-children">
                            <a href="shop-pc.html?productType=caps" data-product-type="caps">
                                <img class="category-icon" src="brandedukv15-child/assets/images/ui/icons/categories/Cap.png" alt="" aria-hidden="true">
                                <span class="category-text">Headwear / Accessories</span>
                                <span class="category-caret" aria-hidden="true"></span>
                            </a>
                            <ul class="megamenu">
                                <li>
                                    <ul>
                                        <li><a href="#">Beanies</a></li>
                                        <li><a href="#">Bucket Hats</a></li>
                                        <li><a href="#">Caps</a></li>
                                        <li><a href="#">Gloves &amp; Scarves</a></li>
                                        <li><a href="#">Hi-Vis Headwear</a></li>
                                        <li><a href="#">Kids Headwear</a></li>
                                        <li><a href="#">Work Accessories</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="has-children">
                            <a href="shop-pc.html?accreditation=recycled" data-accreditation="recycled">
                                <img class="category-icon" src="brandedukv15-child/assets/images/ui/icons/categories/Recycle.png" alt="" aria-hidden="true">
                                <span class="category-text">Sustainable / Recycled &amp; Organic</span>
                                <span class="category-caret" aria-hidden="true"></span>
                            </a>
                            <ul class="megamenu brand-grid">
                                <li class="brand-heading">0 - 9</li>
                                <li><a href="#">2786</a></li>
                                <li class="brand-heading">A</li>
                                <li><a href="#">Adidas</a></li>
                                <li><a href="#">Asquith &amp; Fox</a></li>
                                <li><a href="#">AWDis Just Cool</a></li>
                                <li><a href="#">AWDis Just Hoods</a></li>
                                <li class="brand-heading">B</li>
                                <li><a href="#">B&amp;C Collection</a></li>
                                <li><a href="#">Bagbase</a></li>
                                <li><a href="#">Beechfield</a></li>
                                <li><a href="#">Build Your Brand</a></li>
                                <li class="brand-heading">C</li>
                                <li><a href="#">Callaway</a></li>
                                <li><a href="#">Craghoppers</a></li>
                                <li class="brand-heading">F</li>
                                <li><a href="#">Finden &amp; Hales</a></li>
                                <li><a href="#">Flexfit by Yupoong</a></li>
                                <li><a href="#">Front Row</a></li>
                                <li class="brand-heading">H</li>
                                <li><a href="#">Henbury</a></li>
                                <li><a href="#">Home &amp; Living</a></li>
                                <li class="brand-heading">K</li>
                                <li><a href="#">Kariban</a></li>
                                <li><a href="#">KiMood</a></li>
                                <li class="brand-heading">L</li>
                                <li><a href="#">Larkwood</a></li>
                                <li class="brand-heading">M</li>
                                <li><a href="#">Madeira</a></li>
                                <li><a href="#">Mumbles</a></li>
                                <li class="brand-heading">N</li>
                                <li><a href="#">New Morning Studios</a></li>
                                <li><a href="#">Nike</a></li>
                                <li><a href="#">Nimbus</a></li>
                                <li><a href="#">Nutshell</a></li>
                                <li class="brand-heading">P</li>
                                <li><a href="#">Portwest</a></li>
                                <li><a href="#">Premier</a></li>
                                <li><a href="#">Pro RTX</a></li>
                                <li class="brand-heading">Q</li>
                                <li><a href="#">Quadra</a></li>
                                <li class="brand-heading">R</li>
                                <li><a href="#">RalaFlex</a></li>
                                <li><a href="#">Regatta Junior</a></li>
                                <li><a href="#">Regatta Professional</a></li>
                                <li><a href="#">Result</a></li>
                                <li><a href="#">Russell Athletic&reg;</a></li>
                                <li class="brand-heading">S</li>
                                <li><a href="#">Scruffs</a></li>
                                <li><a href="#">SF</a></li>
                                <li class="brand-heading">T</li>
                                <li><a href="#">Stormtech</a></li>
                                <li><a href="#">Tee Jays</a></li>
                                <li><a href="#">Tombo</a></li>
                                <li><a href="#">TriDri</a></li>
                                <li class="brand-heading">W</li>
                                <li><a href="#">Westford Mill</a></li>
                                <li><a href="#">Wombat</a></li>
                                <li class="brand-heading">Y</li>
                                <li><a href="#">Yoko</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="shop-pc.html" class="view-all-link">
                                <span class="category-text">View All Categories</span>
                                <span class="category-caret" aria-hidden="true"></span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <nav class="main-nav" aria-label="primary navigation">
                <ul class="menu">
                    <li class="has-megamenu">
                        <a href="#" aria-haspopup="true">
                            All Products
                            <span class="nav-caret" aria-hidden="true"></span>
                        </a>
                        <ul class="nav-megamenu brand-grid">
                            <li class="brand-heading">A</li>
                            <li><a href="#">Accessories</a></li>
                            <li><a href="#">Anti Static / ESD</a></li>
                            <li><a href="shop.html?category=aprons">Aprons</a></li>
                            <li><a href="#">Arc Flash</a></li>
                            <li><a href="#">Autumn Workwear</a></li>
                            <li class="brand-heading">B</li>
                            <li><a href="#">Bags</a></li>
                            <li><a href="#">Beanies</a></li>
                            <li><a href="#">Bib &amp; Brace Overalls</a></li>
                            <li><a href="#">Blouses</a></li>
                            <li><a href="#">Bodywarmers &amp; Gilets</a></li>
                            <li class="brand-heading">C</li>
                            <li><a href="#">Caps</a></li>
                            <li><a href="#">Chainsaw and Forestry</a></li>
                            <li><a href="#">Chefswear</a></li>
                            <li><a href="#">Chem Splash</a></li>
                            <li><a href="#">Coats &amp; Jackets</a></li>
                            <li><a href="#">Coldstore</a></li>
                            <li><a href="#">Construction</a></li>
                            <li><a href="#">Coveralls</a></li>
                            <li><a href="#">Covid Test Kit</a></li>
                            <li class="brand-heading">D</li>
                            <li><a href="#">Disposable</a></li>
                            <li><a href="#">Dresses</a></li>
                            <li><a href="#">DTF Supplies</a></li>
                            <li class="brand-heading">F</li>
                            <li><a href="#">Face Masks &amp; Covers</a></li>
                            <li><a href="#">Flame Retardant</a></li>
                            <li><a href="#">Fleece Jackets</a></li>
                            <li><a href="#">Footwear</a></li>
                            <li class="brand-heading">G</li>
                            <li><a href="#">Gilets</a></li>
                            <li><a href="#">Golf</a></li>
                            <li><a href="#">Gloves PPE</a></li>
                            <li><a href="#">Gloves Winter</a></li>
                            <li class="brand-heading">H</li>
                            <li><a href="#">Headwear</a></li>
                            <li><a href="#">Healthcare</a></li>
                            <li><a href="#">Helmets</a></li>
                            <li><a href="#">Hi-Vis</a></li>
                            <li><a href="#">Hoodies</a></li>
                            <li><a href="#">Hospitality</a></li>
                            <li class="brand-heading">J</li>
                            <li><a href="#">Jackets</a></li>
                            <li><a href="#">Joggers</a></li>
                            <li class="brand-heading">K</li>
                            <li><a href="#">Knitwear</a></li>
                            <li class="brand-heading">L</li>
                            <li><a href="#">Lab / Medical Coats</a></li>
                            <li><a href="#">Lateral Flow Tests</a></li>
                            <li><a href="#">Lounge &amp; Underwear</a></li>
                            <li class="brand-heading">M</li>
                            <li><a href="#">Maternity</a></li>
                            <li class="brand-heading">O</li>
                            <li><a href="#">Offshore Clothing</a></li>
                            <li><a href="#">Overalls</a></li>
                            <li class="brand-heading">P</li>
                            <li><a href="#">Painter &amp; Decorator Clothing</a></li>
                            <li><a href="#">Plus Size</a></li>
                            <li><a href="#">Polo Shirts</a></li>
                            <li><a href="#">PPE</a></li>
                            <li class="brand-heading">R</li>
                            <li><a href="#">Rail Spec</a></li>
                            <li class="brand-heading">S</li>
                            <li><a href="#">Scarves</a></li>
                            <li><a href="#">Schoolwear</a></li>
                            <li><a href="#">Scrubs</a></li>
                            <li><a href="#">Security</a></li>
                            <li><a href="#">Shirts</a></li>
                            <li><a href="#">Shorts</a></li>
                            <li><a href="#">Skirts</a></li>
                            <li><a href="#">Socks</a></li>
                            <li><a href="#">Softshell Jackets</a></li>
                            <li><a href="#">Sports &amp; Teamwear</a></li>
                            <li><a href="#">Spring Workwear</a></li>
                            <li><a href="#">Suits &amp; Tailoring</a></li>
                            <li><a href="#">Summer Workwear</a></li>
                            <li><a href="#">Sustainable</a></li>
                            <li><a href="#">Sweatshirts</a></li>
                            <li class="brand-heading">T</li>
                            <li><a href="#">Tabards</a></li>
                            <li><a href="#">Thermals &amp; Base Layers</a></li>
                            <li><a href="#">Ties</a></li>
                            <li><a href="#">Tote Bags</a></li>
                            <li><a href="#">Towelling</a></li>
                            <li><a href="#">Trades</a></li>
                            <li><a href="#">Trousers</a></li>
                            <li><a href="#">T-Shirts</a></li>
                            <li><a href="#">Tunics</a></li>
                            <li class="brand-heading">U</li>
                            <li><a href="#">Umbrellas</a></li>
                            <li class="brand-heading">W</li>
                            <li><a href="#">Waistcoats</a></li>
                            <li><a href="#">Welding Workwear</a></li>
                            <li><a href="#">Winter Workwear</a></li>
                        </ul>
                    </li>
                    <li><a href="#">BrandedUK</a></li>
                    <li class="has-megamenu promotions-menu">
                        <a href="#" aria-haspopup="true">
                            Promotions
                            <span class="nav-caret" aria-hidden="true"></span>
                        </a>
                        <div class="promo-dropdown" role="region" aria-label="Promotional bundles">
                            <div class="promo-dropdown-inner">
                                <figure class="promo-card promo-theme-1">
                                    <div class="promo-card-thumb" aria-hidden="true"></div>
                                    <figcaption class="promo-card-title">Bundle 1</figcaption>
                                    <span class="promo-card-tag">Starter</span>
                                </figure>
                                <figure class="promo-card promo-theme-2">
                                    <div class="promo-card-thumb" aria-hidden="true"></div>
                                    <figcaption class="promo-card-title">Bundle 2</figcaption>
                                    <span class="promo-card-tag">Teams</span>
                                </figure>
                                <figure class="promo-card promo-theme-3">
                                    <div class="promo-card-thumb" aria-hidden="true"></div>
                                    <figcaption class="promo-card-title">Bundle 3</figcaption>
                                    <span class="promo-card-tag">Eco</span>
                                </figure>
                                <figure class="promo-card promo-theme-4">
                                    <div class="promo-card-thumb" aria-hidden="true"></div>
                                    <figcaption class="promo-card-title">Bundle 4</figcaption>
                                    <span class="promo-card-tag">Season</span>
                                </figure>
                                <figure class="promo-card promo-theme-5">
                                    <div class="promo-card-thumb" aria-hidden="true"></div>
                                    <figcaption class="promo-card-title">Bundle 5</figcaption>
                                    <span class="promo-card-tag">Pro</span>
                                </figure>
                            </div>
                        </div>
                    </li>
                    <li class="has-megamenu exclusives-menu">
                        <a href="#" aria-haspopup="true">
                            Exclusives
                            <span class="nav-caret" aria-hidden="true"></span>
                        </a>
                        <div class="exclusives-dropdown" role="region" aria-label="Exclusive brands">
                            <div class="exclusives-dropdown-title">Exclusives</div>
                            <div class="exclusives-grid">
                                <a href="shop-pc.html?brand=adidas" class="exclusive-brand" title="Adidas">
                                    <img src="../brandedukv15-child/assets/images/brands/adidas.jpg" alt="Adidas">
                                </a>
                                <a href="shop-pc.html?brand=b%26c-collection" class="exclusive-brand" title="B&C Collection">
                                    <img src="../brandedukv15-child/assets/images/brands/bandc-collection.png" alt="B&C">
                                </a>
                                <a href="shop-pc.html?brand=build-your-brand" class="exclusive-brand" title="Build Your Brand">
                                    <img src="../brandedukv15-child/assets/images/brands/build-your-brand.png" alt="Build Your Brand">
                                </a>
                                <a href="shop-pc.html?brand=build-your-brand-basic" class="exclusive-brand" title="Build Your Brand Basic">
                                    <img src="../brandedukv15-child/assets/images/brands/build-your-brand-basic-logo-web-2021.jpg" alt="Build Your Brand Basic">
                                </a>
                                <a href="shop-pc.html?brand=build-your-brandit" class="exclusive-brand" title="Brandit">
                                    <img src="../brandedukv15-child/assets/images/brands/build-your-brandit-logo.jpeg" alt="Brandit">
                                </a>
                                <a href="shop-pc.html?brand=comfort-colors" class="exclusive-brand" title="Comfort Colors">
                                    <img src="../brandedukv15-child/assets/images/brands/comfort-colors.webp" alt="Comfort Colors">
                                </a>
                                <a href="shop-pc.html?brand=new-morning-studios" class="exclusive-brand" title="New Morning Studios">
                                    <img src="../brandedukv15-child/assets/images/brands/web-logo-new-morning-studios.png" alt="New Morning Studios">
                                </a>
                                <a href="shop-pc.html?brand=nimbus" class="exclusive-brand" title="Nimbus">
                                    <img src="../brandedukv15-child/assets/images/brands/nimbus2020.webp" alt="Nimbus">
                                </a>
                                <a href="shop-pc.html?brand=nutshell" class="exclusive-brand" title="Nutshell">
                                    <img src="../brandedukv15-child/assets/images/brands/nutshell-bag2020.webp" alt="Nutshell">
                                </a>
                                <a href="shop-pc.html?brand=ogio" class="exclusive-brand" title="OGIO">
                                    <img src="../brandedukv15-child/assets/images/brands/ogio2020.webp" alt="OGIO">
                                </a>
                                <a href="shop-pc.html?brand=rhino" class="exclusive-brand" title="Rhino">
                                    <img src="../brandedukv15-child/assets/images/brands/rhino2020.jpg" alt="Rhino">
                                </a>
                                <a href="shop-pc.html?brand=ribbon" class="exclusive-brand" title="Ribbon">
                                    <img src="../brandedukv15-child/assets/images/brands/brand-logo-ribbon.jpg" alt="Ribbon">
                                </a>
                                <a href="shop-pc.html?brand=tridri" class="exclusive-brand" title="TriDri">
                                    <img src="../brandedukv15-child/assets/images/brands/tridri.webp" alt="Tri Dri">
                                </a>
                                <a href="shop-pc.html?brand=under-armour" class="exclusive-brand" title="Under Armour">
                                    <img src="../brandedukv15-child/assets/images/brands/under-armour.webp" alt="Under Armour">
                                </a>
                                <a href="shop-pc.html?brand=wombat" class="exclusive-brand" title="Wombat">
                                    <img src="../brandedukv15-child/assets/images/brands/wombat.jpg" alt="Wombat">
                                </a>
                            </div>
                        </div>
                    </li>
                    <li><a href="#">More</a></li>
                    <li><a href="#">Services</a></li>
                    <li><a href="catalogue.html">Catalogue</a></li>
                    <li><a href="#">About</a></li>
                </ul>
            </nav>
        </div>
    </div>
</header>

<!-- Back Button Bar -->
<div class="back-bar">
    <div class="header-container">
        <button type="button" class="back-btn" onclick="window.history.back()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
            Back
        </button>
    </div>
</div>

<!-- Breadcrumb Navigation -->
<div class="breadcrumb-bar">
    <div class="header-container">
        <nav class="breadcrumb-nav" aria-label="Breadcrumb">
            <a href="home-pc.html" class="breadcrumb-link">Home</a>
            <span class="breadcrumb-separator">></span>
            <a href="shop-pc.html" class="breadcrumb-link">Shop</a>
            <span class="breadcrumb-separator">></span>
            <a id="breadcrumbCategoryLink" href="#" class="breadcrumb-link">Category</a>
            <span class="breadcrumb-separator">></span>
            <span id="breadcrumbProduct" class="breadcrumb-current">Product Name</span>
        </nav>
    </div>
</div>

<div class="page-container">

    <!-- LEFT -->
    <div class="left-column">
        <div class="product-visual">
            <div class="thumb-column" id="productThumbColumn">
                <!-- Thumbnails loaded dynamically from API -->
            </div>
            <div class="product-main">
                <img id="mainImage" class="main-img" src="" alt="Loading product..." style="min-height: 400px; background: #f3f4f6;">
                <button type="button" class="zoom-btn" id="zoomImageBtn" aria-label="Zoom image">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                        <path d="M11 8v6"></path>
                        <path d="M8 11h6"></path>
                    </svg>
                </button>
            </div>
        </div>

        <div class="description-box" id="productDescriptionBox">
            <h2 id="descriptionTitle">Loading...</h2>
            <p id="descriptionText">
                Loading product details...
            </p>
        </div>

        <!-- Step 3 Order Summary Mount (Desktop: left column) -->
        <div id="step3SidebarLeftMount" class="step3-sidebar-left-mount" style="display:none;"></div>

    </div>

    <!-- RIGHT -->
    <div class="right-column">

        <div class="summary-main">
            <!-- PRODUCT TITLE BOX -->
            <div class="title-box">
                <div class="title-left">
                    <h1 class="garment-main-title">
                        Loading...
                    </h1>
                    
                    <div class="prod-code-line">
                        <span class="prod-label">Product code:</span>
                        <span class="prod-code-value">---</span>
                    </div>
                </div>
                <a href="#" title="View brand products" class="brand-link" id="brandLogoLink" style="display:none;">
                    <img src="" class="title-gildan-logo" alt="" id="brandLogoImg">
                </a>
            </div>

            <!-- CUSTOMIZATION BADGE -->
            <div class="customization-badge">
                <span class="cust-badge embroidery">EMBROIDERY</span>
                <span class="cust-badge print">PRINT</span>
            </div>

            <!-- MAIN PRICE -->
            <div id="mainPrice" class="main-price">17.58 <span>each ex VAT</span></div>
            
            <!-- TIER PRICING - Compact (dynamically populated from API) -->
            <div id="tierPricingContainer" class="tier-pricing-compact">
                <!-- Price breaks will be dynamically loaded from API -->
            </div>

            <!-- STEP PROGRESS BAR -->
            <div class="step-progress" style="display:flex; align-items:center; justify-content:center; gap:0; margin:24px 0; padding:20px 40px; background:linear-gradient(135deg,#f8f9fa,#f1f5f9); border-radius:18px;">
                <div style="display:flex; flex-direction:column; align-items:center; gap:8px;">
                    <span id="stepNum1" style="width:44px; height:44px; border-radius:50%; background:linear-gradient(135deg,#8b5cf6,#7c3aed); color:white; font-size:1.1rem; font-weight:700; display:flex; align-items:center; justify-content:center; box-shadow:0 4px 14px rgba(124,58,237,0.3);">1</span>
                    <span id="stepLabel1" style="font-size:0.9rem; font-weight:600; color:#7c3aed;">Colour</span>
                </div>
                <div id="connector-1-2" style="width:60px; height:4px; background:#e5e7eb; margin:0 16px; margin-bottom:28px; border-radius:2px;"></div>
                <div style="display:flex; flex-direction:column; align-items:center; gap:8px;">
                    <span id="stepNum2" style="width:44px; height:44px; border-radius:50%; background:linear-gradient(135deg,#8b5cf6,#7c3aed); color:white; font-size:1.1rem; font-weight:700; display:flex; align-items:center; justify-content:center; box-shadow:0 4px 14px rgba(124,58,237,0.3);">2</span>
                    <span id="stepLabel2" style="font-size:0.9rem; font-weight:600; color:#7c3aed;">Sizes</span>
                </div>
                <div id="connector-2-3" style="width:60px; height:4px; background:#e5e7eb; margin:0 16px; margin-bottom:28px; border-radius:2px;"></div>
                <div style="display:flex; flex-direction:column; align-items:center; gap:8px;">
                    <span id="stepNum3" style="width:44px; height:44px; border-radius:50%; background:linear-gradient(135deg,#8b5cf6,#7c3aed); color:white; font-size:1.1rem; font-weight:700; display:flex; align-items:center; justify-content:center; box-shadow:0 4px 14px rgba(124,58,237,0.3);">3</span>
                    <span id="stepLabel3" style="font-size:0.9rem; font-weight:600; color:#7c3aed;">Customize</span>
                </div>
                <div id="connector-3-4" style="width:60px; height:4px; background:#e5e7eb; margin:0 16px; margin-bottom:28px; border-radius:2px;"></div>
                <div style="display:flex; flex-direction:column; align-items:center; gap:8px;">
                    <span id="stepNum4" style="width:44px; height:44px; border-radius:50%; background:linear-gradient(135deg,#8b5cf6,#7c3aed); color:white; font-size:1.1rem; font-weight:700; display:flex; align-items:center; justify-content:center; box-shadow:0 4px 14px rgba(124,58,237,0.3);">4</span>
                    <span id="stepLabel4" style="font-size:0.9rem; font-weight:600; color:#7c3aed;">Submit quote</span>
                </div>
            </div>

            <!-- STEP 1: COLOUR -->
            <div class="step-section" data-step="1">
                <h3 class="step-title"><span class="step-badge">1</span> Choose Colour</h3>
                <div id="colorGrid" class="color-grid"></div>
            </div>

            <!-- STEP 2: SIZES -->
            <div class="step-section" data-step="2">
                <h3 class="step-title"><span class="step-badge">2</span> Choose Sizes &amp; Quantities</h3>
                <div id="sizesGrid" class="sizes-grid"></div>
            </div>

            <!-- MINI SUMMARY (hidden - now using sidebar) -->
            <div id="belowBtnSummary" class="below-summary" style="display:none;"></div>

            <!-- STEP 3: CUSTOMIZE POSITIONS (always visible) -->
            <div class="step-section customize-positions-inline" data-step="3" id="step3PositionsSection">
                <h3 class="step-title"><span class="step-badge">3</span> Choose Customization Position(s)</h3>
                <div class="customize-inline-layout">
                    <aside class="sidebar customize-inline-sidebar">
                        <h3>Your Order Summary:</h3>
                        
                        <div class="sidebar-costs">
                            <h4 class="cost-breakdown-title">Cost Breakdown</h4>
                            <div class="section garment-section">
                                <div class="row">
                                    <span class="label">Garment Cost</span>
                                    <span class="value" id="sidebarGarmentCost">0.00</span>
                                </div>
                                <div class="row detail">
                                    <span>Unit Price:</span>
                                    <span class="detail-values">
                                        <span id="garmentUnitPrice">0.00</span>
                                        <span id="garmentQty">Qty: 0</span>
                                    </span>
                                </div>
                            </div>
                            <div id="customizationCostsList">
                                <!-- Populated by JavaScript with individual customization rows -->
                            </div>
                            <div class="cost-row total-row">
                                <strong>Total Cost</strong>
                                <strong id="sidebarTotalCost" class="total-amount">0.00</strong>
                            </div>
                        </div>

                        <div id="basketItemsList" class="basket-items-scroll">
                            <!-- Populated by JavaScript -->
                        </div>
                    </aside>

                    <div class="customize-inline-main">
                        <div class="customize-key" style="display:flex; gap:12px; margin-bottom:16px; flex-wrap:wrap;">
                            <span style="font-size:13px; color:#6b7280;">Key:</span>
                            <span class="key-badge embroidery" style="background:#10b981; color:white; padding:4px 10px; border-radius:6px; font-size:12px; font-weight:600;"> Embroidery</span>
                            <span class="key-badge print" style="background:#3b82f6; color:white; padding:4px 10px; border-radius:6px; font-size:12px; font-weight:600;"> Print</span>
                        </div>

                        <div class="positions-grid" id="positionOptions" style="display:grid; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:16px;">
                    <!-- Left Chest -->
                    <div class="position-card" data-position="left-breast" data-embroidery="5.00" data-print="3.50">
                        <div class="position-card-header">
                            <label class="position-checkbox">
                                <input type="checkbox" name="position" value="left-breast">
                                <span>Left Chest</span>
                            </label>
                            <div class="position-prices">
                                <button type="button" class="price-badge price-emb" data-method="embroidery" data-default-label="Embroidery" data-default-price="5.00">
                                    <span class="price-label">EMBROIDERY</span>
                                    <span class="price-value">5.00</span>
                                </button>
                                <button type="button" class="price-badge price-print" data-method="print" data-default-label="Print" data-default-price="3.50">
                                    <span class="price-label">PRINT</span>
                                    <span class="price-value">3.50</span>
                                </button>
                            </div>
                        </div>
                        <div class="position-preview">
                            <img class="position-placeholder" src="https://i.postimg.cc/sfqnrsjm/Chat_GPT_Image_Dec_19_2025_03_56_48_PM.png" alt="Left Chest">
                            <div class="logo-overlay-box left-chest" hidden>
                                <img class="logo-overlay-img" src="" alt="">
                            </div>
                        </div>
                        <div class="uploaded-logo-container" hidden>
                            <div class="uploaded-logo-box">
                                <img class="uploaded-logo-thumb" src="" alt="Logo preview">
                                <button type="button" class="delete-logo-btn" title="Remove logo">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                                </button>
                            </div>
                            <button type="button" class="logo-added-pill logo-ready-quote-btn">REQUEST QUOTE</button>
                        </div>
                    </div>

                    <!-- Right Chest -->
                    <div class="position-card" data-position="right-breast" data-embroidery="5.00" data-print="3.50">
                        <div class="position-card-header">
                            <label class="position-checkbox">
                                <input type="checkbox" name="position" value="right-breast">
                                <span>Right Chest</span>
                            </label>
                            <div class="position-prices">
                                <button type="button" class="price-badge price-emb" data-method="embroidery" data-default-label="Embroidery" data-default-price="5.00">
                                    <span class="price-label">EMBROIDERY</span>
                                    <span class="price-value">5.00</span>
                                </button>
                                <button type="button" class="price-badge price-print" data-method="print" data-default-label="Print" data-default-price="3.50">
                                    <span class="price-label">PRINT</span>
                                    <span class="price-value">3.50</span>
                                </button>
                            </div>
                        </div>
                        <div class="position-preview">
                            <img class="position-placeholder" src="https://i.postimg.cc/j5QJk6jx/Right-Chest.jpg" alt="Right Chest">
                            <div class="logo-overlay-box right-chest" hidden>
                                <img class="logo-overlay-img" src="" alt="">
                            </div>
                        </div>
                        <div class="uploaded-logo-container" hidden>
                            <div class="uploaded-logo-box">
                                <img class="uploaded-logo-thumb" src="" alt="Logo preview">
                                <button type="button" class="delete-logo-btn" title="Remove logo">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                                </button>
                            </div>
                            <button type="button" class="logo-added-pill logo-ready-quote-btn">REQUEST QUOTE</button>
                        </div>
                    </div>

                    <!-- Front Center -->
                    <div class="position-card" data-position="small-centre-front" data-embroidery="5.00" data-print="3.50">
                        <div class="position-card-header">
                            <label class="position-checkbox">
                                <input type="checkbox" name="position" value="small-centre-front">
                                <span>Front Center</span>
                            </label>
                            <div class="position-prices">
                                <button type="button" class="price-badge price-emb" data-method="embroidery" data-default-label="Embroidery" data-default-price="5.00">
                                    <span class="price-label">EMBROIDERY</span>
                                    <span class="price-value">5.00</span>
                                </button>
                                <button type="button" class="price-badge price-print" data-method="print" data-default-label="Print" data-default-price="3.50">
                                    <span class="price-label">PRINT</span>
                                    <span class="price-value">3.50</span>
                                </button>
                            </div>
                        </div>
                        <div class="position-preview">
                            <img class="position-placeholder" src="https://i.postimg.cc/RFng3DGw/Chat_GPT_Image_Dec_19_2025_08_06_23_PM.png" alt="Front Center">
                            <div class="logo-overlay-box front-center" hidden>
                                <img class="logo-overlay-img" src="" alt="">
                            </div>
                        </div>
                        <div class="uploaded-logo-container" hidden>
                            <div class="uploaded-logo-box">
                                <img class="uploaded-logo-thumb" src="" alt="Logo preview">
                                <button type="button" class="delete-logo-btn" title="Remove logo">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                                </button>
                            </div>
                            <button type="button" class="logo-added-pill logo-ready-quote-btn">REQUEST QUOTE</button>
                        </div>
                    </div>

                    <!-- Large Front -->
                    <div class="position-card" data-position="large-front-center" data-embroidery="POA" data-print="6.00">
                        <div class="position-card-header">
                            <label class="position-checkbox">
                                <input type="checkbox" name="position" value="large-front-center">
                                <span>Large Front</span>
                            </label>
                            <div class="position-prices">
                                <button type="button" class="price-badge price-emb poa-badge" data-method="embroidery" data-default-label="Embroidery" data-default-price="POA">
                                    <span class="price-label">EMBROIDERY</span>
                                    <span class="price-value">POA</span>
                                </button>
                                <button type="button" class="price-badge price-print" data-method="print" data-default-label="Print" data-default-price="6.00">
                                    <span class="price-label">PRINT</span>
                                    <span class="price-value">6.00</span>
                                </button>
                            </div>
                        </div>
                        <div class="position-preview">
                            <img class="position-placeholder" src="https://i.postimg.cc/RFng3DGw/Chat_GPT_Image_Dec_19_2025_08_06_23_PM.png" alt="Large Front">
                            <div class="logo-overlay-box large-front" hidden>
                                <img class="logo-overlay-img" src="" alt="">
                            </div>
                        </div>
                        <div class="uploaded-logo-container" hidden>
                            <div class="uploaded-logo-box">
                                <img class="uploaded-logo-thumb" src="" alt="Logo preview">
                                <button type="button" class="delete-logo-btn" title="Remove logo">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                                </button>
                            </div>
                            <button type="button" class="logo-added-pill logo-ready-quote-btn">REQUEST QUOTE</button>
                        </div>
                    </div>

                    <!-- Back Large -->
                    <div class="position-card" data-position="large-back" data-embroidery="POA" data-print="5.00">
                        <div class="position-card-header">
                            <label class="position-checkbox">
                                <input type="checkbox" name="position" value="large-back">
                                <span>Back Large</span>
                            </label>
                            <div class="position-prices">
                                <button type="button" class="price-badge price-emb poa-badge" data-method="embroidery" data-default-label="Embroidery" data-default-price="POA">
                                    <span class="price-label">EMBROIDERY</span>
                                    <span class="price-value">POA</span>
                                </button>
                                <button type="button" class="price-badge price-print" data-method="print" data-default-label="Print" data-default-price="5.00">
                                    <span class="price-label">PRINT</span>
                                    <span class="price-value">5.00</span>
                                </button>
                            </div>
                        </div>
                        <div class="position-preview">
                            <img class="position-placeholder" src="https://i.postimg.cc/zD6dr8zt/Chat_GPT_Image_Dec_19_2025_03_51_18_PM.png" alt="Back Large">
                            <div class="logo-overlay-box large-back" hidden>
                                <img class="logo-overlay-img" src="" alt="">
                            </div>
                        </div>
                        <div class="uploaded-logo-container" hidden>
                            <div class="uploaded-logo-box">
                                <img class="uploaded-logo-thumb" src="" alt="Logo preview">
                                <button type="button" class="delete-logo-btn" title="Remove logo">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                                </button>
                            </div>
                            <button type="button" class="logo-added-pill logo-ready-quote-btn">REQUEST QUOTE</button>
                        </div>
                    </div>

                    <!-- Left Sleeve -->
                    <div class="position-card" data-position="left-arm" data-embroidery="5.00" data-print="3.50">
                        <div class="position-card-header">
                            <label class="position-checkbox">
                                <input type="checkbox" name="position" value="left-arm">
                                <span>Left Sleeve</span>
                            </label>
                            <div class="position-prices">
                                <button type="button" class="price-badge price-emb" data-method="embroidery" data-default-label="Embroidery" data-default-price="5.00">
                                    <span class="price-label">EMBROIDERY</span>
                                    <span class="price-value">5.00</span>
                                </button>
                                <button type="button" class="price-badge price-print" data-method="print" data-default-label="Print" data-default-price="3.50">
                                    <span class="price-label">PRINT</span>
                                    <span class="price-value">3.50</span>
                                </button>
                            </div>
                        </div>
                        <div class="position-preview">
                            <img class="position-placeholder" src="https://i.postimg.cc/cLr487yc/Chat_GPT_Image_Dec_19_2025_05_12_56_PM.png" alt="Left Sleeve">
                            <div class="logo-overlay-box left-sleeve" hidden>
                                <img class="logo-overlay-img" src="" alt="">
                            </div>
                        </div>
                        <div class="uploaded-logo-container" hidden>
                            <div class="uploaded-logo-box">
                                <img class="uploaded-logo-thumb" src="" alt="Logo preview">
                                <button type="button" class="delete-logo-btn" title="Remove logo">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                                </button>
                            </div>
                            <button type="button" class="logo-added-pill logo-ready-quote-btn">REQUEST QUOTE</button>
                        </div>
                    </div>

                    <!-- Right Sleeve -->
                    <div class="position-card" data-position="right-arm" data-embroidery="5.00" data-print="3.50">
                        <div class="position-card-header">
                            <label class="position-checkbox">
                                <input type="checkbox" name="position" value="right-arm">
                                <span>Right Sleeve</span>
                            </label>
                            <div class="position-prices">
                                <button type="button" class="price-badge price-emb" data-method="embroidery" data-default-label="Embroidery" data-default-price="5.00">
                                    <span class="price-label">EMBROIDERY</span>
                                    <span class="price-value">5.00</span>
                                </button>
                                <button type="button" class="price-badge price-print" data-method="print" data-default-label="Print" data-default-price="3.50">
                                    <span class="price-label">PRINT</span>
                                    <span class="price-value">3.50</span>
                                </button>
                            </div>
                        </div>
                        <div class="position-preview">
                            <img class="position-placeholder" src="https://i.postimg.cc/cLr487yc/Chat_GPT_Image_Dec_19_2025_05_12_56_PM.png" alt="Right Sleeve" style="transform: scaleX(-1);">
                            <div class="logo-overlay-box right-sleeve" hidden>
                                <img class="logo-overlay-img" src="" alt="">
                            </div>
                        </div>
                        <div class="uploaded-logo-container" hidden>
                            <div class="uploaded-logo-box">
                                <img class="uploaded-logo-thumb" src="" alt="Logo preview">
                                <button type="button" class="delete-logo-btn" title="Remove logo">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                                </button>
                            </div>
                            <button type="button" class="logo-added-pill logo-ready-quote-btn">REQUEST QUOTE</button>
                        </div>
                    </div>
                </div>

                <!-- Submit Quote Button for Step 4 -->
                <div class="step4-submit-cta" style="margin-top:24px; text-align:center;">
                    <button id="submitQuoteBtnInline" class="cta-btn primary" style="min-width:280px;" disabled>
                        <span class="cta-icon"></span>
                        <span class="cta-text">Submit Your Quote</span>
                    </button>
                </div>
            </div>
        </div>

    </div>
</div>

<!-- MOBILE STICKY BAR -->
<div id="mobileStickyBar" class="mobile-sticky-bar">
    <div class="sticky-summary">
        <span id="stickyItemCount">0 items</span>
        <span id="stickyTotal">0.00</span>
    </div>
    <button id="mobileAddCustomize" class="sticky-cta" disabled>
        Add Logo 
    </button>
</div>

<!-- CLEAR BASKET MODAL -->
<div id="clearBasketModal" class="confirm-overlay" aria-hidden="true">
    <div class="confirm-dialog" role="alertdialog" aria-modal="true" aria-labelledby="clearModalTitle" aria-describedby="clearModalMessage">
        <button type="button" class="confirm-close" data-cancel aria-label="Close">
            <span aria-hidden="true"></span>
        </button>
        <div class="confirm-icon" aria-hidden="true"></div>
        <h3 id="clearModalTitle" class="confirm-title">Clear basket?</h3>
        <p id="clearModalMessage" class="confirm-message">Removing these items cannot be undone. Do you want to proceed?</p>
        <div class="confirm-actions">
            <button type="button" class="confirm-btn outline" data-cancel>Keep items</button>
            <button type="button" class="confirm-btn solid" data-confirm>Yes, clear it</button>
        </div>
    </div>
</div>

<!-- POPUP -->
<div id="quotePopup" class="popup-overlay">
    <div class="popup-box">

        <div class="popup-header">
            <span class="popup-title">Added to basket</span>
            <span id="closePopup" class="close-x"></span>
        </div>

        <div id="popupContent" class="popup-content-fixed"></div>

        <hr class="popup-divider">

        <div id="popupSummary" class="popup-summary-fixed"></div>

        <div class="popup-buttons">
            <button id="uploadLogoBtn" class="popup-btn popup-btn-purple">Add your logo now</button>
            <button class="popup-btn popup-btn-grey" onclick="window.location.href='quote-basket.html'">View Basket</button>
        </div>

        <input type="file" id="logoInput" multiple hidden>
        <div id="logoPreview" class="logo-preview"></div>

        <a href="home-pc.html" class="continue-shopping">Continue Shopping</a>
    </div>
</div>

<!-- CUSTOMIZATION MODAL -->
<div id="customizationModal" class="cust-modal" style="display: none;">
    <div class="cust-modal-content">
        <span class="cust-close" onclick="closeCustomizationModal()">&times;</span>
        
        <!-- Step Indicator -->
        <div class="step-indicator">
            <div class="step-circle active" data-step="1">1</div>
            <div class="step-circle" data-step="2">2</div>
            <div class="step-circle" data-step="3">3</div>
        </div>

        <!-- Step 1: Choose Colour -->
        <div id="step1" class="cust-step active-step">
            <h2><span class="step-number">1</span> Choose Colour</h2>
            <div class="color-selection-grid" id="colorSelectionGrid">
                <!-- 37 colors will be rendered here -->
            </div>
            <div class="cust-nav-buttons">
                <button class="cust-btn-secondary" onclick="closeCustomizationModal()">Cancel</button>
                <button class="cust-btn-primary" onclick="goToStep(2)">Next Step</button>
            </div>
        </div>

        <!-- Step 2: Choose Position(s) -->
        <div id="step2" class="cust-step">
            <h2><span class="step-number">1</span> Choose Position(s)</h2>
            <div class="positions-key">
                <span class="key-label">Key:</span>
                <span class="key-badge embroidery-badge"> Embroidery</span>
                <span class="key-badge print-badge"> Print</span>
            </div>
            <div class="positions-grid">
                <div class="position-card" data-position="left-breast" data-embroidery="5.00" data-print="3.50">
                    <div class="position-prices">
                        <span class="price-emb">+  5.00</span>
                        <span class="price-print">+  3.50</span>
                    </div>
                    <img src="https://via.placeholder.com/200x200?text=Left+Breast" alt="Left Breast">
                    <label class="position-checkbox">
                        <input type="checkbox" name="position" value="left-breast">
                        <span>Left Breast</span>
                    </label>
                </div>
                <div class="position-card" data-position="right-breast" data-embroidery="5.00" data-print="3.50">
                    <div class="position-prices">
                        <span class="price-emb">+  5.00</span>
                        <span class="price-print">+  3.50</span>
                    </div>
                    <img src="https://via.placeholder.com/200x200?text=Right+Breast" alt="Right Breast">
                    <label class="position-checkbox">
                        <input type="checkbox" name="position" value="right-breast">
                        <span>Right Breast</span>
                    </label>
                </div>
                <div class="position-card" data-position="left-arm" data-embroidery="5.00" data-print="3.50">
                    <div class="position-prices">
                        <span class="price-emb">+  5.00</span>
                        <span class="price-print">+  3.50</span>
                    </div>
                    <img src="https://via.placeholder.com/200x200?text=Left+Arm" alt="Left Arm">
                    <label class="position-checkbox">
                        <input type="checkbox" name="position" value="left-arm">
                        <span>Left Arm</span>
                    </label>
                </div>
                <div class="position-card" data-position="right-arm" data-embroidery="5.00" data-print="3.50">
                    <div class="position-prices">
                        <span class="price-emb">+  5.00</span>
                        <span class="price-print">+  3.50</span>
                    </div>
                    <img src="https://via.placeholder.com/200x200?text=Right+Arm" alt="Right Arm">
                    <label class="position-checkbox">
                        <input type="checkbox" name="position" value="right-arm">
                        <span>Right Arm</span>
                    </label>
                </div>
                <div class="position-card" data-position="small-centre-front" data-embroidery="5.00" data-print="3.50">
                    <div class="position-prices">
                        <span class="price-emb">+  5.00</span>
                        <span class="price-print">+  3.50</span>
                    </div>
                    <img src="https://via.placeholder.com/200x200?text=Small+Centre" alt="Small Centre Front">
                    <label class="position-checkbox">
                        <input type="checkbox" name="position" value="small-centre-front">
                        <span>Small Centre Front</span>
                    </label>
                </div>
                <div class="position-card" data-position="large-centre-front" data-embroidery="7.00" data-print="5.00">
                    <div class="position-prices">
                        <span class="price-emb">+  7.00</span>
                        <span class="price-print">+  5.00</span>
                    </div>
                    <img src="https://via.placeholder.com/200x200?text=Large+Centre" alt="Large Centre Front">
                    <label class="position-checkbox">
                        <input type="checkbox" name="position" value="large-centre-front">
                        <span>Large Centre Front</span>
                    </label>
                </div>
                <div class="position-card" data-position="large-back" data-embroidery="7.00" data-print="5.00">
                    <div class="position-prices">
                        <span class="price-emb">+  7.00</span>
                        <span class="price-print">+  5.00</span>
                    </div>
                    <img src="https://via.placeholder.com/200x200?text=Large+Back" alt="Large Back">
                    <label class="position-checkbox">
                        <input type="checkbox" name="position" value="large-back">
                        <span>Large Back</span>
                    </label>
                </div>
            </div>
            <div class="cust-nav-buttons">
                <button class="cust-btn-secondary" onclick="goToStep(1)">Previous</button>
                <button class="cust-btn-primary" onclick="validateAndGoToStep3()">Next Step</button>
            </div>
        </div>

        <!-- Step 3: Customise Position (Dynamic) -->
        <div id="step3" class="cust-step">
            <h2><span class="step-number">2</span> Customise Position <span id="positionCounter">(1 of 2)</span>: <span id="currentPositionName">Left Breast</span></h2>
            
            <!-- Product Summary Sidebar -->
            <div class="customisation-sidebar">
                <h3>Customising Product:</h3>
                <img id="sidebarProductImage" src="" alt="Product" class="sidebar-product-img">
                <div class="sidebar-product-info">
                    <div class="sidebar-product-name" id="sidebarProductName">Loading...</div>
                    <div class="sidebar-product-code">Product Code: <span id="sidebarProductCode">---</span></div>
                    <div class="sidebar-product-color" id="sidebarProductColor">Aquatic / 4 x S4 x M x 8</div>
                </div>
                <div class="sidebar-costs">
                    <div class="cost-row">
                        <span>Garment Cost</span>
                        <span id="sidebarGarmentCost">17.98 x 8</span>
                    </div>
                    <div class="cost-row" id="logoSetupRow" style="display: none;">
                        <span>Logo Setup Cost</span>
                        <span id="sidebarLogoSetup">10.00 x 1</span>
                    </div>
                    <div class="cost-section">
                        <strong>Application Charges</strong>
                    </div>
                    <div id="applicationChargesList"></div>
                    <div class="cost-row total-row">
                        <strong>Total Cost</strong>
                        <strong id="sidebarTotalCost">233.84</strong>
                    </div>
                </div>
            </div>

            <!-- Main Customization Area -->
            <div class="customisation-main">
                <!-- Returning Customer Section -->
                <div class="returning-customer-box">
                    <h3>Returning Customer?</h3>
                    <p>Log in to access your previous artwork</p>
                    <button class="login-btn">Login</button>
                </div>

                <!-- Customisation Name -->
                <div class="form-group">
                    <label>Customisation Name: <span class="info-icon"></span></label>
                    <input type="text" id="customisationName" class="form-input">
                    <div class="error-message" id="nameError" style="display: none;">Customisation name is required</div>
                </div>

                <!-- Application Method -->
                <div class="form-group">
                    <label>Choose Application Method:</label>
                    <div class="method-buttons">
                        <button class="method-btn active" data-method="embroidery">Embroidery</button>
                        <button class="method-btn" data-method="printing">Printing</button>
                    </div>
                </div>

                <!-- Application Type -->
                <div class="form-group">
                    <label>Choose Application Type:</label>
                    <div class="type-buttons">
                        <button class="type-btn active" data-type="logo">
                            <div class="type-icon"></div>
                            <div>Logo</div>
                        </button>
                        <button class="type-btn" data-type="text">
                            <div class="type-icon">TT</div>
                            <div>Text</div>
                        </button>
                    </div>
                </div>

                <!-- Logo Upload Section -->
                <div id="logoUploadSection" class="upload-section">
                    <div class="upload-tabs">
                        <button class="upload-tab active" data-tab="upload">Upload New Logo *</button>
                        <button class="upload-tab" data-tab="contact">Contact me for my logo?</button>
                        <button class="upload-tab" data-tab="existing">You have my logo</button>
                    </div>
                    
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-dropzone" id="dropzone">
                            <div class="upload-icon"></div>
                            <p>Choose an image file or drag it here</p>
                            <p class="upload-note">.jpg, .png, .eps, .ai, .pdf max file size: 5MB</p>
                        </div>
                        <input type="file" id="positionLogoInput" accept=".jpg,.jpeg,.png,.eps,.ai,.pdf" style="display: none;">
                        <div id="logoPreviewArea" class="logo-preview-area" style="display: none;">
                            <img id="logoPreviewImage" src="" alt="Logo Preview">
                            <p class="preview-link">Click here to preview</p>
                        </div>
                    </div>

                    <p class="upload-disclaimer">* Please note: You must upload a logo if you plan to reuse it in other print positions, or on other garments. You can however upload a temporary image for now and change it prior to production by sending it to us via email.</p>
                </div>

                <!-- Text Input Section (hidden by default) -->
                <div id="textInputSection" class="text-section" style="display: none;">
                    <div class="form-group">
                        <label>Enter Your Text:</label>
                        <textarea class="text-input" rows="3" placeholder="Enter text here..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Font:</label>
                        <select class="form-select">
                            <option>Arial</option>
                            <option>Helvetica</option>
                            <option>Times New Roman</option>
                        </select>
                    </div>
                </div>

                <!-- Special Instructions -->
                <div class="form-group">
                    <label>Special Instructions</label>
                    <textarea class="form-textarea" rows="5" placeholder="Add any special instructions here..."></textarea>
                </div>

                <!-- Product Preview -->
                <div class="product-preview-box">
                    <img id="previewHoodieImage" src="" alt="Hoodie Preview">
                </div>
            </div>

            <div class="cust-nav-buttons">
                <button class="cust-btn-secondary" onclick="goBackFromStep3()">Edit Positions</button>
                <button class="cust-btn-primary" onclick="validateAndNextPosition()">Next Step</button>
            </div>
        </div>

        <!-- Validation Error Modal -->
        <div id="validationError" class="validation-error" style="display: none;">
            <div class="validation-error-content">
                <p id="validationErrorMessage">Please select at least one position</p>
                <button onclick="closeValidationError()">OK</button>
            </div>
        </div>
    </div>
</div>

<!-- FOOTER -->
<footer class="footer">
    <p>&copy; 2024 Branded UK</p>
</footer>

<!-- Account Panel Overlay -->
<div class="account-overlay" id="accountOverlay"></div>

<!-- Account Sign In / Sign Up Panel -->
<div class="account-panel" id="accountPanel">
    <div class="account-panel-header">
        <button class="account-close-btn" id="accountCloseBtn" aria-label="Close">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        </button>
    </div>
    
    <div class="account-forms-container">
        <div class="account-arrow" id="accountArrow">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
        </div>
        
        <div class="account-forms-wrapper">
            <div class="account-form-holder signin-form" id="signinForm">
                <div class="account-form-icon">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                        <circle cx="12" cy="7" r="4"/>
                    </svg>
                    <span>Sign In</span>
                </div>
                <div class="account-form-content">
                    <form id="signinFormData">
                        <div class="account-input-group">
                            <input type="email" id="signinEmail" required>
                            <label for="signinEmail">Email</label>
                        </div>
                        <div class="account-input-group">
                            <input type="password" id="signinPassword" required>
                            <label for="signinPassword">Password</label>
                        </div>
                        <div class="account-form-actions">
                            <button type="submit" class="account-submit-btn">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                    <polyline points="12 5 19 12 12 19"></polyline>
                                </svg>
                            </button>
                        </div>
                        <a href="#" class="account-forgot-link">Forgot Password?</a>
                    </form>
                </div>

                        <!-- Submit Quote Button for Step 4 -->
                        <div class="step4-submit-cta" style="margin-top:24px; text-align:center;">
                            <button id="submitQuoteBtnInline" class="cta-btn primary" style="min-width:280px;" disabled>
                                <span class="cta-icon"></span>
                                <span class="cta-text">Submit Your Quote</span>
                            </button>
                            <p style="margin-top:8px; font-size:13px; color:#6b7280;">Complete at least one logo upload to continue</p>
                        </div>
                    </div>
                </div>
                    </svg>
                    <span>Sign Up</span>
                </div>
                <div class="account-form-content">
                    <form id="signupFormData">
                        <div class="account-input-row">
                            <div class="account-input-group half">
                                <input type="text" id="signupFirstName" required>
                                <label for="signupFirstName">First Name</label>
                            </div>
                            <div class="account-input-group half">
                                <input type="text" id="signupLastName" required>
                                <label for="signupLastName">Last Name</label>
                            </div>
                        </div>
                        <div class="account-input-group">
                            <input type="email" id="signupEmail" required>
                            <label for="signupEmail">Email</label>
                        </div>
                        <div class="account-input-group">
                            <input type="tel" id="signupPhone" required>
                            <label for="signupPhone">Phone Number</label>
                        </div>
                        <div class="account-input-group">
                            <input type="text" id="signupCompany">
                            <label for="signupCompany">Company Name (optional)</label>
                        </div>
                        <div class="account-input-group">
                            <input type="password" id="signupPassword" required>
                            <label for="signupPassword">Password</label>
                        </div>
                        <div class="account-form-actions">
                            <button type="submit" class="account-submit-btn">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                    <polyline points="12 5 19 12 12 19"></polyline>
                                </svg>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <div class="account-logged-in" id="accountLoggedIn" style="display: none;">
        <div class="account-user-avatar">
            <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="#8455f4" stroke-width="1">
                <circle cx="12" cy="12" r="10"/>
                <path d="M12 14c-2.5 0-4.5-2-4.5-4.5S9.5 5 12 5s4.5 2 4.5 4.5S14.5 14 12 14z"/>
                <path d="M4.5 19.5c0-3 3.5-5 7.5-5s7.5 2 7.5 5"/>
            </svg>
        </div>
        <h3 class="account-user-name" id="accountUserName">Welcome!</h3>
        <p class="account-user-email" id="accountUserEmail"></p>
        <div class="account-user-details" id="accountUserDetails"></div>
        <button class="account-logout-btn" id="accountLogoutBtn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            Sign Out
        </button>
    </div>
</div>

<script src="brandedukv15-child/assets/js/config/mockup-images.js?v=20260111"></script>
<script src="brandedukv15-child/assets/js/core.js?v=20251230"></script>
<script src="brandedukv15-child/assets/js/header.js?v=20251230"></script>
<script src="brandedukv15-child/assets/js/vat-toggle.js?v=20251230"></script>
<script src="brandedukv15-child/assets/js/pages/product.js?v=20260123c"></script>
<script src="brandedukv15-child/assets/js/api.js?v=20260124f"></script>
<script src="brandedukv15-child/assets/js/pages/customize-positions-inline.js?v=20260124d"></script>
<!-- Color Change Confirmation Modal -->
<div id="colorChangeModal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 400px; text-align: center; padding: 30px;">
        <h3 style="margin-top: 0; color: #2E1A47;">Save current selection?</h3>
        <p style="color: #666; margin-bottom: 25px;">You have unsaved items. Would you like to save them before changing color?</p>
        <div style="display: flex; gap: 12px; justify-content: center;">
            <button id="colorChangeSaveBtn" class="btn-primary" style="flex: 1; padding: 12px 20px; background: #7c3aed; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">Save & Continue</button>
            <button id="colorChangeDiscardBtn" class="btn-secondary" style="flex: 1; padding: 12px 20px; background: #e5e7eb; color: #374151; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">Discard</button>
        </div>
    </div>
</div>

<script src="brandedukv15-child/assets/js/header.js?v=20251230"></script>
<script src="brandeduk.com 2/js/main.js?v=20251230"></script>
<script src="brandeduk.com/js/product-types-menu.js?v=20260110"></script>

<!-- Account Panel Script -->
<script>
(function() {
    const accountBtn = document.getElementById('accountBtn');
    const accountPanel = document.getElementById('accountPanel');
    const accountOverlay = document.getElementById('accountOverlay');
    const accountCloseBtn = document.getElementById('accountCloseBtn');
    const accountArrow = document.getElementById('accountArrow');
    const signinForm = document.getElementById('signinForm');
    const signupForm = document.getElementById('signupForm');
    const signinFormData = document.getElementById('signinFormData');
    const signupFormData = document.getElementById('signupFormData');
    const accountLoggedIn = document.getElementById('accountLoggedIn');
    const accountLogoutBtn = document.getElementById('accountLogoutBtn');
    
    if (!accountBtn || !accountPanel) return;
    
    const USER_SESSION_KEY = 'brandeduk-user-session';
    
    function checkLoggedIn() {
        const session = localStorage.getItem(USER_SESSION_KEY);
        if (session) {
            const user = JSON.parse(session);
            showLoggedInView(user);
            return true;
        }
        return false;
    }
    
    function showLoggedInView(user) {
        document.querySelector('.account-forms-container').style.display = 'none';
        accountLoggedIn.style.display = 'block';
        document.getElementById('accountUserName').textContent = 'Welcome, ' + user.firstName + '!';
        document.getElementById('accountUserEmail').textContent = user.email;
        const detailsHtml = '<p><strong>Name:</strong> ' + user.firstName + ' ' + user.lastName + '</p>' +
            '<p><strong>Phone:</strong> ' + (user.phone || 'Not provided') + '</p>' +
            '<p><strong>Company:</strong> ' + (user.company || 'Not provided') + '</p>';
        document.getElementById('accountUserDetails').innerHTML = detailsHtml;
    }
    
    function showFormsView() {
        document.querySelector('.account-forms-container').style.display = 'flex';
        accountLoggedIn.style.display = 'none';
    }
    
    function openPanel() {
        checkLoggedIn();
        accountPanel.classList.add('active');
        accountOverlay.classList.add('active');
        document.body.style.overflow = 'hidden';
    }
    
    function closePanel() {
        accountPanel.classList.remove('active');
        accountOverlay.classList.remove('active');
        document.body.style.overflow = '';
        resetForms();
    }
    
    function resetForms() {
        signinForm.classList.remove('active', 'inactive');
        signupForm.classList.remove('active', 'inactive');
        accountArrow.classList.remove('visible');
    }
    
    accountBtn.addEventListener('click', function(e) {
        e.preventDefault();
        openPanel();
    });
    
    accountCloseBtn.addEventListener('click', closePanel);
    accountOverlay.addEventListener('click', closePanel);
    
    signinForm.addEventListener('click', function() {
        if (!signinForm.classList.contains('active')) {
            signinForm.classList.add('active');
            signinForm.classList.remove('inactive');
            signupForm.classList.add('inactive');
            signupForm.classList.remove('active');
            accountArrow.classList.add('visible');
        }
    });
    
    signupForm.addEventListener('click', function() {
        if (!signupForm.classList.contains('active')) {
            signupForm.classList.add('active');
            signupForm.classList.remove('inactive');
            signinForm.classList.add('inactive');
            signinForm.classList.remove('active');
            accountArrow.classList.add('visible');
        }
    });
    
    accountArrow.addEventListener('click', function(e) {
        e.stopPropagation();
        resetForms();
    });
    
    signinFormData.addEventListener('submit', function(e) {
        e.preventDefault();
        var email = document.getElementById('signinEmail').value;
        var password = document.getElementById('signinPassword').value;
        
        var users = JSON.parse(localStorage.getItem('brandeduk-users') || '[]');
        var user = users.find(function(u) { return u.email === email && u.password === password; });
        if (user) {
            localStorage.setItem(USER_SESSION_KEY, JSON.stringify(user));
            showLoggedInView(user);
            showAccountToast('Welcome back, ' + user.firstName + '!');
        } else {
            showAccountToast('Invalid email or password');
        }
    });
    
    signupFormData.addEventListener('submit', function(e) {
        e.preventDefault();
        var userData = {
            firstName: document.getElementById('signupFirstName').value,
            lastName: document.getElementById('signupLastName').value,
            email: document.getElementById('signupEmail').value,
            phone: document.getElementById('signupPhone').value,
            company: document.getElementById('signupCompany').value,
            password: document.getElementById('signupPassword').value
        };
        
        var users = JSON.parse(localStorage.getItem('brandeduk-users') || '[]');
        if (users.some(function(u) { return u.email === userData.email; })) {
            showAccountToast('Email already registered');
            return;
        }
        userData.id = Date.now();
        users.push(userData);
        localStorage.setItem('brandeduk-users', JSON.stringify(users));
        localStorage.setItem(USER_SESSION_KEY, JSON.stringify(userData));
        showLoggedInView(userData);
        showAccountToast('Account created! Welcome, ' + userData.firstName + '!');
    });
    
    accountLogoutBtn.addEventListener('click', function() {
        localStorage.removeItem(USER_SESSION_KEY);
        showFormsView();
        resetForms();
        showAccountToast('You have been signed out');
    });
    
    function showAccountToast(message) {
        var toast = document.createElement('div');
        toast.textContent = message;
        toast.style.cssText = 'position: fixed; bottom: 40px; left: 50%; transform: translateX(-50%); background: #1f2937; color: #fff; padding: 12px 24px; border-radius: 8px; font-size: 14px; z-index: 10001;';
        document.body.appendChild(toast);
        setTimeout(function() {
            toast.style.opacity = '0';
            setTimeout(function() { toast.remove(); }, 300);
        }, 3000);
    }
})();
</script>

<!-- ==================== CUSTOMIZE POSITIONS MODALS ==================== -->

<!-- DESIGN UPLOAD MODAL -->
<div class="design-modal-overlay" id="designModal">
    <div class="design-modal">
        <div class="design-modal-header">
            <h3 id="designModalTitle">Upload Logo</h3>
            <button class="design-modal-close" id="closeDesignModal">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
        </div>
        <div class="design-modal-body">
            <div class="design-section" id="uploadLogoSection">
                <h4 class="design-section-title" id="uploadLogoTitle">Drop or select your logo</h4>
                <div class="upload-dropzone" id="designUploadZone">
                    <input type="file" id="designLogoUpload" accept="image/*,.pdf,.ai,.svg,.eps" style="position:absolute; left:-9999px; width:1px; height:1px; opacity:0;" tabindex="-1" aria-hidden="true">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#7c3aed" stroke-width="1.5">
                        <rect x="3" y="3" width="18" height="18" rx="2"/>
                        <circle cx="8.5" cy="8.5" r="1.5"/>
                        <path d="M21 15l-5-5L5 21"/>
                    </svg>
                    <p class="dropzone-text">Drag & drop or <label class="browse-link" for="designLogoUpload">Browse image</label></p>
                    <p class="dropzone-formats">JPG, PNG, SVG, PDF, AI, EPS  Max 5MB</p>
                </div>
                <div class="upload-preview-container" id="designUploadPreview" hidden>
                    <img src="" alt="" class="upload-preview-img" id="designPreviewImg">
                    <button class="upload-remove-btn" id="removeUploadedLogo" title="Remove logo">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                    <button class="toggle-bg-btn" id="removeBgBtn" title="Remove background">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                            <path d="M9 3v18"/>
                            <path d="M15 3v18"/>
                            <path d="M3 9h18"/>
                            <path d="M3 15h18"/>
                        </svg>
                        <span>Remove BG</span>
                    </button>
                </div>
                <canvas id="bgRemovalCanvas" style="display: none;"></canvas>
            </div>
        </div>
        <div class="design-modal-footer">
            <button class="apply-design-btn" id="applyDesignBtn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <polyline points="20 6 9 17 4 12"/>
                </svg>
                Add to Product
            </button>
        </div>
    </div>
</div>

<!-- Toast Notification -->
<div class="toast-notification" id="toastNotification"></div>

<!-- ADD LOGO MODAL -->
<div id="addLogoModal" class="modal-overlay add-logo-overlay" style="display: none;">
    <div class="modal-box add-logo-modal">
        <button class="modal-close" type="button" onclick="closeAddLogoModal()">&times;</button>
        <h3 id="addLogoModalTitle">Add Customization</h3>
        <p id="addLogoModalSubtitle" class="add-logo-subtitle">Left Breast  Embroidery</p>

        <div class="add-logo-form">
            <label for="addLogoName">Customization Name</label>
            <input type="text" id="addLogoName" class="form-input" placeholder="e.g. Company logo">
            <div class="method-summary">Method: <span id="addLogoMethod">Embroidery</span></div>

            <div class="type-buttons add-logo-type-buttons">
                <button type="button" class="type-btn active" data-type="logo">Logo</button>
                <button type="button" class="type-btn" data-type="text">Text</button>
            </div>

            <div id="addLogoUploadSection" class="upload-section">
                <div class="upload-dropzone" id="addLogoDropzone">
                    <div class="dropzone-content" id="addLogoDropzoneContent">
                        <strong>Upload your logo</strong>
                        <span>Click to launch upload popup</span>
                        <span class="max-size">Max 5MB  JPG, PNG, PDF, AI, EPS</span>
                    </div>
                    <img id="addLogoPreview" alt="Logo preview" style="display: none;">
                </div>
            </div>

            <div id="addLogoTextSection" class="text-section" style="display: none;">
                <label for="addLogoText">Enter Text</label>
                <textarea id="addLogoText" rows="3" class="form-input" placeholder="Add your custom text"></textarea>
            </div>

            <div id="addLogoError" class="add-logo-error" style="display: none;">Please provide a customization name.</div>
        </div>

        <div class="modal-buttons">
            <button class="modal-btn modal-btn-cancel" type="button" onclick="closeAddLogoModal()">Cancel</button>
            <button class="modal-btn modal-btn-ok" type="button" onclick="saveAddLogoCustomization()">Save</button>
        </div>
    </div>
</div>

<!-- CONFIRM REMOVE MODAL -->
<div id="confirmRemoveModal" class="modal-overlay" style="display: none;">
    <div class="modal-box">
        <h3>Remove this item from basket?</h3>
        <div class="modal-buttons">
            <button class="modal-btn modal-btn-cancel" onclick="closeRemoveModal()">Cancel</button>
            <button class="modal-btn modal-btn-ok" onclick="confirmRemove()">OK</button>
        </div>
    </div>
</div>

<!-- QUOTE REQUEST POPUP -->
<div id="quoteRequestPopup" class="quote-popup-overlay" style="display:none;">
    <div class="quote-popup">
        <button class="quote-popup__close" id="closeQuotePopup">&times;</button>
        <h2 class="quote-popup__title">Request Your Quote</h2>
        <p class="quote-popup__subtitle">Enter your details and we'll send you a personalised quote</p>
        
        <form id="quoteRequestForm" class="quote-popup__form">
            <div class="quote-popup__field">
                <label for="quoteName">Full Name *</label>
                <input type="text" id="quoteName" name="name" placeholder="John Smith" required>
            </div>
            
            <div class="quote-popup__field">
                <label for="quoteCompany">Company Name</label>
                <input type="text" id="quoteCompany" name="company" placeholder="Your Company Ltd">
            </div>
            
            <div class="quote-popup__field">
                <label for="quotePhone">Phone Number *</label>
                <input type="tel" id="quotePhone" name="phone" placeholder="+44 7700 900000" required inputmode="tel">
                <span class="quote-popup__error" id="phoneError">Only numbers allowed</span>
            </div>
            
            <div class="quote-popup__field">
                <label for="quoteEmail">E-mail *</label>
                <input type="email" id="quoteEmail" name="email" placeholder="john@company.com" required>
                <span class="quote-popup__error" id="emailError">Please enter a valid email address</span>
            </div>
            
            <div class="quote-popup__field">
                <label for="quoteAddress">Address</label>
                <input type="text" id="quoteAddress" name="address" placeholder="123 High Street, London, SW1A 1AA">
            </div>
            
            <button type="submit" class="quote-popup__submit" id="quoteSubmitBtn">
                Submit Quote Request
            </button>
        </form>
    </div>
</div>

<!-- IMAGE LIGHTBOX / ZOOM POPUP -->
<div class="image-lightbox-overlay" id="imageLightbox">
    <div class="image-lightbox-container">
        <button type="button" class="image-lightbox-close" id="closeLightboxX" aria-label="Close">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        </button>
        <img class="image-lightbox-img" id="lightboxImage" src="" alt="Zoomed product image">
        <button type="button" class="image-lightbox-close-btn" id="closeLightbox">Close</button>
    </div>
</div>

<script>
// ===== IMAGE LIGHTBOX / ZOOM FUNCTIONALITY =====
(function() {
    var lightbox = document.getElementById('imageLightbox');
    var lightboxImg = document.getElementById('lightboxImage');
    var closeLightboxBtn = document.getElementById('closeLightbox');
    var closeLightboxX = document.getElementById('closeLightboxX');
    var zoomBtn = document.getElementById('zoomImageBtn');
    var mainImage = document.getElementById('mainImage');
    
    function openLightbox() {
        if (!mainImage || !lightbox || !lightboxImg) return;
        lightboxImg.src = mainImage.src;
        lightboxImg.alt = mainImage.alt;
        lightbox.classList.add('active');
        document.body.style.overflow = 'hidden';
    }
    
    function closeLightboxFn() {
        if (!lightbox) return;
        lightbox.classList.remove('active');
        document.body.style.overflow = '';
    }
    
    // Open on zoom button click
    if (zoomBtn) {
        zoomBtn.addEventListener('click', openLightbox);
    }
    
    // Also open on main image click (optional, for accessibility)
    if (mainImage) {
        mainImage.style.cursor = 'zoom-in';
        mainImage.addEventListener('click', openLightbox);
    }
    
    // Close on buttons click
    if (closeLightboxBtn) {
        closeLightboxBtn.addEventListener('click', closeLightboxFn);
    }
    if (closeLightboxX) {
        closeLightboxX.addEventListener('click', closeLightboxFn);
    }
    
    // Close on overlay click (but not on container)
    if (lightbox) {
        lightbox.addEventListener('click', function(e) {
            if (e.target === lightbox) {
                closeLightboxFn();
            }
        });
    }
    
    // Close on Escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && lightbox && lightbox.classList.contains('active')) {
            closeLightboxFn();
        }
    });
})();
</script>

<!-- ProductType-based Position Cards Configuration -->
<script>
(function() {
    'use strict';

    function isZipProduct(productData) {
        const name = (productData && productData.name ? String(productData.name) : '').toLowerCase();
        const code = (productData && productData.code ? String(productData.code) : '').toLowerCase();
        const haystack = (name + ' ' + code).trim();

        if (!haystack) return false;
        return /(\bzip\b|\bzipped\b|\bfull\s*zip\b)/i.test(haystack);
    }
    
    // ===== DYNAMIC POSITION MAPPING SYSTEM =====
    
    // Default fallback images (from HTML)
    const DEFAULT_POSITION_IMAGES = {
        'left-breast': 'https://i.postimg.cc/sfqnrsjm/Chat_GPT_Image_Dec_19_2025_03_56_48_PM.png',
        'right-breast': 'https://i.postimg.cc/j5QJk6jx/Right-Chest.jpg',
        'small-centre-front': 'https://i.postimg.cc/RFng3DGw/Chat_GPT_Image_Dec_19_2025_08_06_23_PM.png',
        'large-front-center': 'https://i.postimg.cc/RFng3DGw/Chat_GPT_Image_Dec_19_2025_08_06_23_PM.png',
        'large-centre-front': 'https://i.postimg.cc/RFng3DGw/Chat_GPT_Image_Dec_19_2025_08_06_23_PM.png',
        'large-back': 'https://i.postimg.cc/zD6dr8zt/Chat_GPT_Image_Dec_19_2025_03_51_18_PM.png',
        'left-arm': 'https://i.postimg.cc/cLr487yc/Chat_GPT_Image_Dec_19_2025_05_12_56_PM.png',
        'right-arm': 'https://i.postimg.cc/cLr487yc/Chat_GPT_Image_Dec_19_2025_05_12_56_PM.png'
    };
    
    // Default prices per position type
    const DEFAULT_POSITION_PRICES = {
        'left-breast': { embroidery: '5.00', print: '3.50' },
        'right-breast': { embroidery: '5.00', print: '3.50' },
        'small-centre-front': { embroidery: '5.00', print: '3.50' },
        'large-front-center': { embroidery: 'POA', print: '6.00' },
        'large-centre-front': { embroidery: 'POA', print: '6.00' },
        'large-back': { embroidery: 'POA', print: '5.00' },
        'left-arm': { embroidery: '5.00', print: '3.50' },
        'right-arm': { embroidery: '5.00', print: '3.50' }
    };
    
    // Position code to CSS class mapping (for logo overlay positioning)
    const POSITION_TO_CSS_CLASS = {
        'left-breast': 'left-chest',
        'right-breast': 'right-chest',
        'small-centre-front': 'front-center',
        'large-front-center': 'large-front',
        'large-centre-front': 'large-front',
        'large-back': 'large-back',
        'left-arm': 'left-sleeve',
        'right-arm': 'right-sleeve'
    };
    
    // ProductType  Folder Path Mapping (based on database product types)
    const PRODUCT_TYPE_TO_FOLDER = {
        // Direct mappings (confirmed folders exist)
        'Aprons': 'aprons/bib-apron',
        'Safety Vests': 'adult-tops/hivis-jacket',
        'Hoodies': 'adult-tops/hoodies',
        'Sweatshirts': 'adult-tops/hoodies',
        'Polos': 'adult-tops/long-sleeve-polo',
        'T-shirts': 'adult-tops/short-sleeve-crew-neck',
        'Shirts': 'adult-tops/short-sleeve-crew-neck',
        'Jackets': 'adult-tops/soft-shell-jacket',
        'Softshells': 'adult-tops/soft-shell-jacket',
        'Caps': 'headwear/baseball-cap',
        'Beanies': 'headwear/beanie',
        'Trousers': 'pants/workwear-long-trousers',
        'Shorts': 'pants/workwear-shorts',
        'Bags': 'bags/gym-bag',
        
        // Fallbacks (use similar product structure)
        'Fleece': 'adult-tops/hoodies',
        'Gilets & Body Warmers': 'adult-tops/soft-shell-jacket',
        'Knitted Jumpers': 'adult-tops/hoodies',
        'Cardigans': 'adult-tops/hoodies',
        'Blouses': 'adult-tops/short-sleeve-crew-neck',
        'Rugby Shirts': 'adult-tops/short-sleeve-crew-neck',
        'Chinos': 'pants/workwear-long-trousers',
        'Sweatpants': 'pants/workwear-shorts',
        'Trackwear': 'adult-tops/short-sleeve-crew-neck'
    };
    
    // Filename  Position Code Mapping
    const FILENAME_TO_POSITION = {
        // Aprons - use special low-position classes
        'center-front.png': { code: 'small-centre-front', label: 'Center Front', cssClass: 'front-center' },
        'low-left.png': { code: 'left-breast', label: 'Low Left', cssClass: 'apron-low-left' },
        'low-right.png': { code: 'right-breast', label: 'Low Right', cssClass: 'apron-low-right' },
        
        // Adult Tops - Standard positions
        'front.png': { code: 'small-centre-front', label: 'Front Center', cssClass: 'front-center' },
        'front.jpg': { code: 'small-centre-front', label: 'Front Center', cssClass: 'front-center' },
        'front-right.png': { code: 'right-breast', label: 'Front Right', cssClass: 'right-chest' },
        'back.png': { code: 'large-back', label: 'Back Large', cssClass: 'large-back' },
        'back.jpg': { code: 'large-back', label: 'Back Large', cssClass: 'large-back' },
        'left-chest.png': { code: 'left-breast', label: 'Left Chest', cssClass: 'left-chest' },
        'left-chest.jpg': { code: 'left-breast', label: 'Left Chest', cssClass: 'left-chest' },
        'right-chest.png': { code: 'right-breast', label: 'Right Chest', cssClass: 'right-chest' },
        'right-chest.jpg': { code: 'right-breast', label: 'Right Chest', cssClass: 'right-chest' },
        'left-sleeve.png': { code: 'left-arm', label: 'Left Sleeve', cssClass: 'left-sleeve' },
        'left-sleeve.jpg': { code: 'left-arm', label: 'Left Sleeve', cssClass: 'left-sleeve' },
        'right-sleeve.png': { code: 'right-arm', label: 'Right Sleeve', cssClass: 'right-sleeve' },
        'right-sleeve.jpg': { code: 'right-arm', label: 'Right Sleeve', cssClass: 'right-sleeve' },
        
        // Headwear
        'front-logo.png': { code: 'small-centre-front', label: 'Front Centre', cssClass: 'front-center' },
        'left-side.jpg': { code: 'left-breast', label: 'Left Side', cssClass: 'left-chest' },
        'right-side.jpg': { code: 'right-breast', label: 'Right Side', cssClass: 'right-chest' },
        
        // Bags
        'Gym Bag Centered.png': { code: 'small-centre-front', label: 'Centered', cssClass: 'front-center' },
        'Gym Bag Left.png': { code: 'left-breast', label: 'Left', cssClass: 'left-chest' },
        'Gym Bag Right.png': { code: 'right-breast', label: 'Right', cssClass: 'right-chest' },
        'Gym Bag Side.png': { code: 'large-back', label: 'Side', cssClass: 'large-back' },
        
        // Pants
        'Blank Work Trouser.png': { code: 'small-centre-front', label: 'Front', cssClass: 'front-center' },
        'Blank Work short.png': { code: 'small-centre-front', label: 'Front', cssClass: 'front-center' }
    };
    
    // Folder Image Inventory (predefined list of images per folder)
    const FOLDER_IMAGE_MAP = {
        'aprons/bib-apron': ['center-front.png', 'low-left.png', 'low-right.png'],
        'adult-tops/hivis-jacket': ['back.jpg', 'front.png', 'left-chest.png', 'left-sleeve.jpg', 'right-chest.png', 'right-sleeve.jpg'],
        'adult-tops/hoodies': ['back.jpg', 'front.jpg', 'left-chest.jpg', 'left-sleeve.jpg', 'right-chest.jpg', 'right-sleeve.jpg'],
        'adult-tops/long-sleeve-polo': ['back.png', 'left-sleeve.png', 'right-chest.png', 'right-sleeve.png'],
        'adult-tops/short-sleeve-crew-neck': ['back.png', 'left-sleeve.png', 'right-chest.png', 'right-sleeve.png'],
        'adult-tops/soft-shell-jacket': ['back.png', 'front-right.png', 'left-sleeve.png', 'right-sleeve.png'],
        'headwear/baseball-cap': ['back.png', 'front.png', 'left-side.jpg', 'right-side.jpg'],
        'headwear/beanie': ['front-logo.png'],
        'pants/workwear-long-trousers': ['Blank Work Trouser.png'],
        'pants/workwear-shorts': ['Blank Work short.png'],
        'bags/gym-bag': ['Gym Bag Centered.png', 'Gym Bag Left.png', 'Gym Bag Right.png', 'Gym Bag Side.png']
    };

    function normalizeProductTypeForFolder(productType) {
        const raw = String(productType || '').trim();
        if (!raw) return '';

        const lower = raw.toLowerCase();

        // Ensure ALL apron products (e.g. "Colours Bib Apron", "apron", "aprons") use bib apron images
        if (lower === 'apron' || lower === 'aprons' || lower.includes('apron')) {
            return 'Aprons';
        }

        return raw;
    }
    
    // Build positions dynamically from productType
    function buildPositionsFromProductType(productType) {
        if (!productType) {
            console.warn(' No productType provided, using default');
            return null;
        }
        
        const productTypeStr = String(productType).trim();
        const normalizedProductType = normalizeProductTypeForFolder(productTypeStr);
        
        // Get folder path
        const folderPath = PRODUCT_TYPE_TO_FOLDER[normalizedProductType];
        if (!folderPath) {
            console.warn(` No folder mapping for productType: "${productTypeStr}" (normalized: "${normalizedProductType}"), using default`);
            return null;
        }
        
        // Get available images for this folder
        const imageFiles = FOLDER_IMAGE_MAP[folderPath];
        if (!imageFiles || imageFiles.length === 0) {
            console.warn(` No images found for folder: ${folderPath}, using default`);
            return null;
        }
        
        // Build base path
        const basePath = `brandedukv15-child/assets/images/customization/positions/${folderPath}`;
        
        // Map images to positions
        const positions = {};
        imageFiles.forEach(filename => {
            const positionInfo = FILENAME_TO_POSITION[filename];
            if (positionInfo) {
                const positionCode = positionInfo.code;
                const prices = DEFAULT_POSITION_PRICES[positionCode] || { embroidery: '5.00', print: '3.50' };
                
                positions[positionCode] = {
                    label: positionInfo.label,
                    image: `${basePath}/${filename}`,
                    embroidery: prices.embroidery,
                    print: prices.print,
                    cssClass: positionInfo.cssClass
                };
            } else {
                console.warn(` No position mapping for filename: ${filename} in folder ${folderPath}`);
            }
        });
        
        if (Object.keys(positions).length === 0) {
            console.warn(` No valid positions found for productType: "${productTypeStr}", using default`);
            return null;
        }
        
        // Determine which positions to hide (all standard positions not in our list)
        const allStandardPositions = ['left-breast', 'right-breast', 'small-centre-front', 'large-front-center', 'large-centre-front', 'large-back', 'left-arm', 'right-arm'];
        const hidePositions = allStandardPositions.filter(pos => !positions[pos]);
        
        return {
            imagePath: basePath,
            positions: positions,
            hidePositions: hidePositions
        };
    }
    
    // Map API productType to category key (for backward compatibility and fallback)
    function productTypeToCategory(productType) {
        if (!productType) return null;
        
        const productTypeStr = String(productType).trim();

        // Handle product names/types like "Colours Bib Apron" reliably
        if (productTypeStr.toLowerCase().includes('apron')) {
            return 'aprons';
        }

        const typeToCategory = {
            'T-shirts': 'tshirts',
            'T-Shirts': 'tshirts',
            'Tshirts': 'tshirts',
            'Polos': 'polo',
            'Polo Shirts': 'polo',
            'Polo': 'polo',
            'Hoodies': 'hoodies',
            'Hoodies & Sweatshirts': 'hoodies',
            'Sweatshirts': 'hoodies',
            'Jackets': 'jackets',
            'Jackets & Softshell': 'jackets',
            'Softshells': 'jackets',
            'Hi-Vis': 'hivis',
            'Hi-Vis Clothing': 'hivis',
            'Safety Vests': 'hivis',
            'Trousers': 'trousers',
            'Work Trousers': 'trousers',
            'Aprons': 'aprons',
            'Fleeces': 'fleeces',
            'Fleece': 'fleeces',
            'Caps': 'caps',
            'Headwear / Accessories': 'caps',
            'Beanies': 'beanies',
            'Bags': 'bags',
            'Shorts': 'trousers'  // Similar to trousers
        };
        
        // Check exact match first
        if (typeToCategory[productTypeStr]) {
            return typeToCategory[productTypeStr];
        }
        
        // Try case-insensitive match
        const lowerType = productTypeStr.toLowerCase();
        for (const [key, value] of Object.entries(typeToCategory)) {
            if (key.toLowerCase() === lowerType) {
                return value;
            }
        }
        
        // Fallback: normalize to lowercase and replace spaces/hyphens
        return lowerType.replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '') || null;
    }
    
    // Category Position Configuration (Fallback - used when dynamic mapping fails)
    const CATEGORY_POSITION_CONFIG = {
        'polo': {
            useExternalImages: true,
            images: {
                front: 'https://i.postimg.cc/prXBRhc0/Chat-GPT-Image-Jan-12-2026-07-13-29-PM.png',
                leftSleeve: 'https://i.postimg.cc/2y8xrb9T/Chat-GPT-Image-Jan-12-2026-07-13-55-PM.png',
                rightSleeve: 'https://i.postimg.cc/2y8xrb9T/Chat-GPT-Image-Jan-12-2026-07-13-55-PM.png',
                back: 'https://i.postimg.cc/D0ycnJpB/Chat-GPT-Image-Jan-12-2026-07-13-36-PM.png'
            },
            positions: {
                'left-breast': { label: 'Left Breast', imageKey: 'front', embroidery: '5.00', print: '3.50' },
                'right-breast': { label: 'Right Breast', imageKey: 'front', embroidery: '5.00', print: '3.50' },
                'left-arm': { label: 'Left Sleeve', imageKey: 'leftSleeve', embroidery: '5.00', print: '3.50' },
                'right-arm': { label: 'Right Sleeve', imageKey: 'rightSleeve', embroidery: '5.00', print: '3.50' },
                'large-back': { label: 'Center Back', imageKey: 'back', embroidery: '5.00', print: '5.00' },
                'large-centre-front': { label: 'Nape of Neck', imageKey: 'back', embroidery: '5.00', print: '3.50' }
            },
            hidePositions: ['small-centre-front', 'large-front-center']
        },
        'tshirts': {
            useExternalImages: true,
            images: {
                front: 'https://i.postimg.cc/fTVKLHLj/Chat_GPT_Image_Jan_11_2026_04_51_46_PM.png',
                back: 'https://i.postimg.cc/4NY5d8dt/Chat_GPT_Image_Jan_11_2026_04_51_51_PM.png',
                leftSleeve: 'https://i.postimg.cc/hPXrjCjm/Chat_GPT_Image_Jan_11_2026_04_51_53_PM.png',
                rightSleeve: 'https://i.postimg.cc/hPXrjCjm/Chat_GPT_Image_Jan_11_2026_04_51_53_PM.png'
            },
            positions: {
                'left-breast': { label: 'Left Breast', imageKey: 'front', embroidery: '5.00', print: '3.50' },
                'right-breast': { label: 'Right Breast', imageKey: 'front', embroidery: '5.00', print: '3.50' },
                'small-centre-front': { label: 'Centre of Chest', imageKey: 'front', embroidery: '5.00', print: '3.50' },
                'left-arm': { label: 'Left Sleeve', imageKey: 'leftSleeve', embroidery: '5.00', print: '3.50' },
                'right-arm': { label: 'Right Sleeve', imageKey: 'rightSleeve', embroidery: '5.00', print: '3.50' },
                'large-front-center': { label: 'Big Front (Print Only)', imageKey: 'front', embroidery: null, print: '6.00' },
                'large-back': { label: 'Big Back (Print Only)', imageKey: 'back', embroidery: null, print: '5.00' }
            },
            hidePositions: ['large-centre-front']
        },
        'aprons': {
            useExternalImages: true,
            images: {
                front: 'brandedukv15-child/assets/images/customization/positions/aprons/bib-apron/center-front.png',
                lowLeft: 'brandedukv15-child/assets/images/customization/positions/aprons/bib-apron/low-left.png',
                lowRight: 'brandedukv15-child/assets/images/customization/positions/aprons/bib-apron/low-right.png'
            },
            positions: {
                'left-breast': { label: 'Low Left', imageKey: 'lowLeft', embroidery: '5.00', print: '3.50', cssClass: 'apron-low-left' },
                'right-breast': { label: 'Low Right', imageKey: 'lowRight', embroidery: '5.00', print: '3.50', cssClass: 'apron-low-right' },
                'small-centre-front': { label: 'Center Front', imageKey: 'front', embroidery: '5.00', print: '3.50', cssClass: 'front-center' }
            },
            hidePositions: ['large-front-center', 'large-centre-front', 'large-back', 'left-arm', 'right-arm']
        },
        'default': {
            imagePath: 'brandedukv15-child/assets/images/customization/positions/adult-tops/hoodies',
            positions: {
                'left-breast': { label: 'Left Chest', image: 'left-chest.jpg' },
                'right-breast': { label: 'Right Chest', image: 'right-chest.jpg' },
                'small-centre-front': { label: 'Front Center', image: 'front.jpg' },
                'large-front-center': { label: 'Large Front', image: 'front.jpg' },
                'large-centre-front': { label: 'Large Front', image: 'front.jpg' },
                'large-back': { label: 'Back Large', image: 'back.jpg' },
                'left-arm': { label: 'Left Sleeve', image: 'left-sleeve.jpg' },
                'right-arm': { label: 'Right Sleeve', image: 'right-sleeve.jpg' }
            },
            hidePositions: []
        }
    };
    
    // Category display names
    const CATEGORY_NAMES = {
        'hoodies': 'Hoodies',
        'aprons': 'Aprons',
        'beanies': 'Beanies',
        'caps': 'Caps',
        'hivis': 'Hi-Vis',
        'jackets': 'Jackets',
        'fleeces': 'Fleeces',
        'polo': 'Polo Shirts',
        'tshirts': 'T-Shirts',
        'bags': 'Bags',
        'trousers': 'Trousers',
        'shorts': 'Shorts',
        'sustainable': 'Sustainable',
        'workwear': 'Workwear',
        'headwear': 'Headwear',
        'default': 'All Products'
    };
    
    function updatePositionCardsForCategory(category, productData) {
        console.log(' updatePositionCardsForCategory called with category:', category, 'productData:', productData);
        
        // Try to build positions dynamically from productType first
        let config = null;
        if (productData && productData.productType) {
            const dynamicConfig = buildPositionsFromProductType(productData.productType);
            if (dynamicConfig) {
                config = dynamicConfig;
                console.log(' Using dynamic config for productType:', productData.productType);
            }
        }
        
        // Fallback to hardcoded config if dynamic failed or productType not available
        if (!config) {
            config = CATEGORY_POSITION_CONFIG[category] || CATEGORY_POSITION_CONFIG['default'];
            console.log(' Using hardcoded config for category:', category, 'config:', config);
        }
        
        const isZip = isZipProduct(productData);
        const normalizedCategory = (category || '').toString().trim().toLowerCase();
        const extraHide = new Set();

        // Business rules:
        // - Jackets: NEVER show Large Front
        // - Fleeces: ONLY hide Large Front if the product is a "zip" fleece
        // - Hoodies: ONLY hide Large Front for zip hoodies (not all hoodies)
        if (normalizedCategory === 'jackets') {
            extraHide.add('large-front-center');
            extraHide.add('large-centre-front');
        }
        if (normalizedCategory === 'fleeces' && isZip) {
            extraHide.add('large-front-center');
            extraHide.add('large-centre-front');
        }
        if (normalizedCategory === 'hoodies' && isZip) {
            extraHide.add('large-front-center');
            extraHide.add('large-centre-front');
        }
        
        // Find all position grids (there might be multiple)
        const positionGrids = document.querySelectorAll('#positionOptions, .positions-grid');

        function updatePriceButtons(card, positionConfig) {
            const pricesWrap = card.querySelector('.position-prices');
            if (!pricesWrap || !positionConfig) return;

            const embBtn = pricesWrap.querySelector('.price-badge[data-method="embroidery"], .price-badge.price-emb');
            const printBtn = pricesWrap.querySelector('.price-badge[data-method="print"], .price-badge.price-print');

            const embroidery = Object.prototype.hasOwnProperty.call(positionConfig, 'embroidery')
                ? positionConfig.embroidery
                : card.dataset.embroidery;
            const print = Object.prototype.hasOwnProperty.call(positionConfig, 'print')
                ? positionConfig.print
                : card.dataset.print;

            // Update dataset (other scripts may rely on these)
            if (embroidery === null) {
                card.dataset.embroidery = '';
            } else if (typeof embroidery !== 'undefined') {
                card.dataset.embroidery = String(embroidery);
            }

            if (print === null) {
                card.dataset.print = '';
            } else if (typeof print !== 'undefined') {
                card.dataset.print = String(print);
            }

            // Embroidery button
            if (embBtn) {
                if (embroidery === null) {
                    embBtn.style.display = 'none';
                } else {
                    embBtn.style.display = '';
                    const isPOA = String(embroidery).toUpperCase() === 'POA';
                    embBtn.classList.toggle('poa-badge', isPOA);
                    const value = isPOA ? 'POA' : ('' + String(embroidery));
                    embBtn.setAttribute('data-default-price', value);
                    const valueEl = embBtn.querySelector('.price-value');
                    if (valueEl) valueEl.textContent = value;
                }
            }

            // Print button
            if (printBtn) {
                if (print === null) {
                    printBtn.style.display = 'none';
                } else {
                    printBtn.style.display = '';
                    const value = '' + String(print);
                    printBtn.setAttribute('data-default-price', value);
                    const valueEl = printBtn.querySelector('.price-value');
                    if (valueEl) valueEl.textContent = value;
                }
            }
        }
        
        positionGrids.forEach(grid => {
            const allCards = grid.querySelectorAll('.position-card');
            console.log(' Found', allCards.length, 'position cards in grid');
            
            allCards.forEach(card => {
                const position = card.dataset.position;
                
                // Check if this position should be hidden
                if ((config.hidePositions && config.hidePositions.includes(position)) || extraHide.has(position)) {
                    card.style.display = 'none';
                    return;
                }
                
                // Check if we have a config for this position
                const positionConfig = config.positions[position];
                if (positionConfig) {
                    card.style.display = '';
                    
                    // Update the image - handle both local and external images
                    const img = card.querySelector('.position-placeholder, .position-image, img');
                    if (img) {
                        let newSrc = null;
                        
                        // Check if using external images (like tshirts)
                        if (config.useExternalImages && positionConfig.imageKey && config.images) {
                            newSrc = config.images[positionConfig.imageKey];
                            // #region agent log
                            fetch('http://127.0.0.1:7244/ingest/ff4bdadc-0eae-4978-b238-71d56c718ed8',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'product-detail.html:2892',message:'Setting sleeve image from external config',data:{position:position,imageKey:positionConfig.imageKey,newSrc:newSrc,hasLeftSleeve:!!config.images.leftSleeve,hasRightSleeve:!!config.images.rightSleeve},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'K'})}).catch(()=>{});
                            // #endregion
                        } else if (positionConfig.image) {
                            // #region agent log
                            fetch('http://127.0.0.1:7244/ingest/ff4bdadc-0eae-4978-b238-71d56c718ed8',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'product-detail.html:2894',message:'Setting image from dynamic/local config',data:{position:position,imagePath:positionConfig.image,configImagePath:config.imagePath},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'K'})}).catch(()=>{});
                            // #endregion
                            // Check if image is already a full path (from dynamic config)
                            // Dynamic config sets full paths like "brandedukv15-child/assets/images/..."
                            if (positionConfig.image.startsWith('brandedukv15-child/') || positionConfig.image.startsWith('/') || positionConfig.image.startsWith('http')) {
                                // Already a full path, use directly
                                newSrc = positionConfig.image;
                            } else if (config.imagePath) {
                                // Relative path, prepend imagePath
                            newSrc = config.imagePath + '/' + positionConfig.image;
                            } else {
                                // Direct image path (fallback)
                                newSrc = positionConfig.image;
                            }
                        }
                        
                        if (newSrc) {
                            // Set image immediately
                            img.src = newSrc;
                            img.alt = positionConfig.label;
                            
                            // Try to load the image, fallback to default if it fails
                            const testImg = new Image();
                            testImg.onload = function() {
                                // Image loaded successfully
                            };
                            testImg.onerror = function() {
                                // Fallback to default image
                                const defaultImg = DEFAULT_POSITION_IMAGES[position];
                                if (defaultImg) {
                                    img.src = defaultImg;
                                    img.alt = positionConfig.label || position;
                                    console.warn('   Image failed to load, using default:', position, '', defaultImg);
                                } else {
                                    console.error('   No default image for position:', position);
                                }
                            };
                            testImg.src = newSrc;
                        } else {
                            // No image configured, use default
                            const defaultImg = DEFAULT_POSITION_IMAGES[position];
                            if (defaultImg) {
                                img.src = defaultImg;
                                img.alt = positionConfig.label || position;
                                console.warn('   No image configured, using default:', position);
                            } else {
                                console.error('   No image source and no default for position:', position);
                            }
                        }
                    }
                    
                    // Update logo overlay CSS class to match position code (CRITICAL for logo positioning)
                    const logoOverlay = card.querySelector('.logo-overlay-box');
                    if (logoOverlay) {
                        // Get the correct CSS class for this position
                        let cssClass = null;
                        if (positionConfig.cssClass) {
                            cssClass = positionConfig.cssClass;
                        } else if (POSITION_TO_CSS_CLASS[position]) {
                            cssClass = POSITION_TO_CSS_CLASS[position];
                        }
                        
                        if (cssClass) {
                            // Remove all position classes (including apron-specific)
                            const allPositionClasses = ['left-chest', 'right-chest', 'front-center', 'large-front', 'large-back', 'left-sleeve', 'right-sleeve', 'apron-low-left', 'apron-low-right'];
                            allPositionClasses.forEach(cls => logoOverlay.classList.remove(cls));
                            // Add the correct class
                            logoOverlay.classList.add(cssClass);
                            // #region agent log
                            setTimeout(() => {
                                const computed = window.getComputedStyle(logoOverlay);
                                fetch('http://127.0.0.1:7244/ingest/ff4bdadc-0eae-4978-b238-71d56c718ed8',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'product-detail.html:2958',message:'Logo overlay positioning applied',data:{position:position,cssClass:cssClass,computedTop:computed.top,computedLeft:computed.left,computedWidth:computed.width,computedHeight:computed.height,hasClass:logoOverlay.classList.contains(cssClass)},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'J'})}).catch(()=>{});
                            }, 100);
                            // #endregion
                        } else {
                            console.warn('   No CSS class mapping for position:', position);
                        }
                    }

                    // Update price availability + values (embroidery/print)
                    updatePriceButtons(card, positionConfig);
                    
                    // Update the label
                    if (positionConfig.label) {
                        const labelSpan = card.querySelector('.position-checkbox span, .position-title, .position-name');
                        if (labelSpan) {
                            labelSpan.textContent = positionConfig.label;
                        }
                    }
                } else {
                    // Position not in config - check if we should show it with defaults
                    // Only hide if it's explicitly in hidePositions list
                    if (config.hidePositions && config.hidePositions.includes(position)) {
                    card.style.display = 'none';
                    } else {
                        // Show with default image and prices
                        card.style.display = '';
                        const img = card.querySelector('.position-placeholder, .position-image, img');
                        if (img) {
                            const defaultImg = DEFAULT_POSITION_IMAGES[position];
                            if (defaultImg) {
                                img.src = defaultImg;
                                console.log('   Using default image for unmapped position:', position);
                            }
                        }
                        
                        // Update logo overlay CSS class
                        const logoOverlay = card.querySelector('.logo-overlay-box');
                        if (logoOverlay && POSITION_TO_CSS_CLASS[position]) {
                            const cssClass = POSITION_TO_CSS_CLASS[position];
                            const allPositionClasses = ['left-chest', 'right-chest', 'front-center', 'large-front', 'large-back', 'left-sleeve', 'right-sleeve', 'apron-low-left', 'apron-low-right'];
                            allPositionClasses.forEach(cls => logoOverlay.classList.remove(cls));
                            logoOverlay.classList.add(cssClass);
                        }
                        
                        // Use default prices
                        const defaultPrices = DEFAULT_POSITION_PRICES[position] || { embroidery: '5.00', print: '3.50' };
                        updatePriceButtons(card, defaultPrices);
                    }
                }
            });

            // Reorder cards for specific categories (Aprons wants Center Front + Big Centre first)
            if ((category || '').toLowerCase() === 'aprons') {
                const preferredOrder = [
                    'small-centre-front',   // Center Front
                    'large-front-center',   // Big Centre
                    'left-breast',          // Low Left
                    'right-breast'          // Low Right
                ];

                const cardsArray = Array.from(allCards);
                cardsArray.sort((a, b) => {
                    const aPos = a.dataset.position;
                    const bPos = b.dataset.position;
                    const aIdx = preferredOrder.indexOf(aPos);
                    const bIdx = preferredOrder.indexOf(bPos);

                    const aRank = aIdx === -1 ? 999 : aIdx;
                    const bRank = bIdx === -1 ? 999 : bIdx;
                    return aRank - bRank;
                });

                cardsArray.forEach(card => grid.appendChild(card));
            }

            // Reorder cards for Beanies (Front Centre must be first)
            if ((category || '').toLowerCase() === 'beanies') {
                const preferredOrder = [
                    'small-centre-front',   // Front Centre
                    'left-breast',          // Front Left
                    'right-breast'          // Front Right
                ];

                const cardsArray = Array.from(allCards);
                cardsArray.sort((a, b) => {
                    const aPos = a.dataset.position;
                    const bPos = b.dataset.position;
                    const aIdx = preferredOrder.indexOf(aPos);
                    const bIdx = preferredOrder.indexOf(bPos);

                    const aRank = aIdx === -1 ? 999 : aIdx;
                    const bRank = bIdx === -1 ? 999 : bIdx;
                    return aRank - bRank;
                });

                cardsArray.forEach(card => grid.appendChild(card));
            }
        });
    }
    
    function updateBreadcrumbs(category, productName) {
        const categoryLink = document.getElementById('breadcrumbCategoryLink');
        const productSpan = document.getElementById('breadcrumbProduct');
        
        if (categoryLink && category) {
            const categorySlug = category.toLowerCase().replace(/\s+/g, '-');
            categoryLink.href = 'shop-pc.html?productType=' + categorySlug;
            categoryLink.textContent = CATEGORY_NAMES[category] || category.charAt(0).toUpperCase() + category.slice(1);
        }
        
        if (productSpan && productName) {
            productSpan.textContent = productName.toUpperCase();
        }
    }
    
    function updateProductDisplay(productData) {
        // Update main image - already handled by product.js, but keeping for compatibility
        const mainImage = document.getElementById('mainImage');
        if (mainImage && productData.image) {
            mainImage.src = productData.image;
            mainImage.alt = productData.name || 'Product';
        }
        
        // Update product title (h1) - already handled by product.js, but keeping for compatibility
        const productTitle = document.querySelector('.garment-main-title');
        if (productTitle && productData.name) {
            productTitle.textContent = productData.name;
        }

        // Update title box product code - already handled by product.js, but keeping for compatibility
        const productCodeValue = document.querySelector('.prod-code-value');
        if (productCodeValue && productData.code) {
            productCodeValue.textContent = productData.code;
        }

        // Update description heading (left column)
        const descriptionHeading = document.querySelector('.description-box h2');
        if (descriptionHeading && productData.name) {
            const codePrefix = productData.code ? (productData.code + ' ') : '';
            descriptionHeading.textContent = codePrefix + productData.name;
        }
        
        // Update sidebar product name - already handled by product.js, but keeping for compatibility
        const sidebarName = document.getElementById('sidebarProductName');
        if (sidebarName && productData.name) {
            sidebarName.textContent = productData.name;
        }

        // Update sidebar product code - already handled by product.js, but keeping for compatibility
        const sidebarCode = document.getElementById('sidebarProductCode');
        if (sidebarCode && productData.code) {
            sidebarCode.textContent = productData.code;
        }
        
        // Update page title - already handled by product.js, but keeping for compatibility
        if (productData.name) {
            document.title = productData.name + ' - Branded UK';
        }
        
    }
    
    // Initialize when DOM is ready
    function init() {
        function applyCategoryBodyClass(rawCategory) {
            const category = (rawCategory || '').toString().trim().toLowerCase();
            if (!category) return;

            Array.from(document.body.classList).forEach(cls => {
                if (cls.startsWith('category-')) document.body.classList.remove(cls);
            });

            const safeCategory = category.replace(/[^a-z0-9_-]/g, '');
            if (safeCategory) document.body.classList.add('category-' + safeCategory);
        }

        // Get product data from API (PRODUCT_DATA set by product.js)
        let category = 'default';
        let productName = 'Product';
        
        if (typeof PRODUCT_DATA !== 'undefined' && PRODUCT_DATA) {
            if (PRODUCT_DATA.name) {
                productName = PRODUCT_DATA.name;
            }
            // Update product display (image, title, etc.)
            updateProductDisplay(PRODUCT_DATA);
        }

        // Expose zip as a CSS hook (for future tweaks)
        const isZip = isZipProduct(PRODUCT_DATA);
        document.body.classList.toggle('product-zip', !!isZip);

        // Expose category as a CSS hook (will be updated when productType is available)
        applyCategoryBodyClass(category);
        
        // Update breadcrumbs
        updateBreadcrumbs(category, productName);
        
        // Update position cards when productType is available from API
        // More robust: Check multiple times and use sessionStorage as fallback
        function updatePositionCardsFromAPI() {
        let productData = null;
            let productType = null;
            
            // First try: Check PRODUCT_DATA global (set by product.js)
            if (typeof PRODUCT_DATA !== 'undefined' && PRODUCT_DATA && PRODUCT_DATA.productType) {
                productData = PRODUCT_DATA;
                productType = PRODUCT_DATA.productType;
            } else {
                // Fallback: Check sessionStorage (product.js saves it there)
                const productDataStr = sessionStorage.getItem('selectedProductData');
        if (productDataStr) {
            try {
                productData = JSON.parse(productDataStr);
                        if (productData && productData.productType) {
                            productType = productData.productType;
                        }
                    } catch (e) {
                        // Silent fail, will retry
                    }
                }
            }
            
            if (productType && productData) {
                const mappedCategory = productTypeToCategory(productType) || 'default';
                updatePositionCardsForCategory(mappedCategory, productData);
                return true;
            }
            
            return false;
        }
        
        // Try multiple times with increasing delays to handle race conditions
        let attempts = 0;
        const maxAttempts = 5;
        const delays = [0, 200, 500, 1000, 2000]; // Try immediately, then 200ms, 500ms, 1s, 2s
        
        function tryUpdateWithDelay() {
            attempts++;
            
            if (updatePositionCardsFromAPI()) {
                return; // Success, stop trying
            }
            
            if (attempts < maxAttempts) {
                const delay = delays[attempts] || 2000;
                setTimeout(tryUpdateWithDelay, delay);
            } else {
                // All attempts failed, use fallback
                updatePositionCardsForCategory('default', null);
            }
        }
        
        // Start trying
        tryUpdateWithDelay();
        
        // Also listen for the productDataLoaded event from product.js
        window.addEventListener('productDataLoaded', function(e) {
            const productData = e.detail;
            if (productData && productData.productType) {
                console.log(' productDataLoaded event received, updating position cards for:', productData.productType);
                const mappedCategory = productTypeToCategory(productData.productType) || 'default';
                updatePositionCardsForCategory(mappedCategory, productData);
            }
        });
    }
    
    // Header searchbar handler - redirects to shop page with search query
    function setupHeaderSearch() {
        const headerSearch = document.getElementById('searchbarHeaderInput');
        if (headerSearch) {
            headerSearch.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const searchQuery = e.target.value.trim();
                    if (searchQuery) {
                        // Redirect to shop page with search query parameter
                        window.location.href = 'shop-pc.html?q=' + encodeURIComponent(searchQuery);
                    }
                }
            });
        }
    }
    
    // Run on DOMContentLoaded or immediately if already loaded
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            init();
            setupHeaderSearch();
        });
    } else {
        init();
        setupHeaderSearch();
    }
})();
</script>

<!--Start of Tawk.to Script-->
<script type="text/javascript">
(function(){
    var host = window.location.hostname;
    // Tawk often blocks localhost; avoid noisy console errors during local dev.
    // Use ?tawk=1 (or ?chat=1) to force-enable locally when needed.
    var allowLocal = false;
    try {
        var params = new URLSearchParams(window.location.search);
        allowLocal = params.has('tawk') || params.has('chat');
    } catch (e) {
        allowLocal = false;
    }
    if (!allowLocal && (host === 'localhost' || host === '127.0.0.1')) return;

    var propertyId = '69628dafb346e51985794182';
    var widgetId = '1jekfitse';

    // If you create a separate Tawk property for staging, set it here:
    // if (host.endsWith('.vercel.app')) { propertyId = '...'; widgetId = '...'; }

    window.Tawk_API = window.Tawk_API || {};
    // Hide default bubble; open only from our in-site trigger.
    window.Tawk_API.onLoad = function () {
        try { if (window.Tawk_API && typeof window.Tawk_API.hideWidget === 'function') window.Tawk_API.hideWidget(); } catch (e) {}
    };
    window.Tawk_API.onChatMinimized = function () {
        try { if (window.Tawk_API && typeof window.Tawk_API.hideWidget === 'function') window.Tawk_API.hideWidget(); } catch (e) {}
    };
    window.Tawk_LoadStart = new Date();

    var s1 = document.createElement('script');
    var s0 = document.getElementsByTagName('script')[0];
    s1.async = true;
    s1.src = 'https://embed.tawk.to/' + propertyId + '/' + widgetId;
    s1.charset = 'UTF-8';
    s1.setAttribute('crossorigin','*');
    s0.parentNode.insertBefore(s1, s0);
})();
</script>
<!--End of Tawk.to Script-->

<script>
(function () {
    function waitForTawk(fn, timeoutMs) {
        var start = Date.now();
        (function tick() {
            try {
                if (window.Tawk_API && typeof fn === 'function') {
                    var res = fn(window.Tawk_API);
                    if (res === true) return;
                }
            } catch (e) {}
            if (Date.now() - start >= timeoutMs) return;
            setTimeout(tick, 150);
        })();
    }

    function openTawkPopup() {
        waitForTawk(function (api) {
            if (typeof api.showWidget === 'function') api.showWidget();
            if (typeof api.maximize === 'function') { api.maximize(); return true; }
            return false;
        }, 5000);
    }

    waitForTawk(function (api) {
        if (typeof api.hideWidget === 'function') { api.hideWidget(); return true; }
        return false;
    }, 8000);

    document.addEventListener('click', function (e) {
        var trigger = e.target && e.target.closest ? e.target.closest('[data-open-tawk]') : null;
        if (!trigger) return;
        e.preventDefault();
        openTawkPopup();
    });
})();
</script>

<style>
@media (max-width: 1023px) {
    iframe[title="chat widget"],
    .tawk-min-container,
    #tawk-bubble-container {
        bottom: 75px !important;
    }
}
</style>

</body>
</html>
